<!DOCTYPE html>
<html lang="zh">
    <head>
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.3.4 -->

    <!-- Title -->
    
    <title>
        
            Shiny包初探 - Part I | 
        
        Hexo
    </title>

    <!-- Meta & Info -->
    <meta charset="utf-8">

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">
    
    
    
    
    
    

    <meta http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#0097A7">
    <meta name="author" content="John Doe">
    <meta name="description" content="null">
    <meta name="keywords" content="null,R,visualization,shiny,interactive">

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/favicon.png">
    <link rel="icon" sizes="192x192" href="/img/favicon.png">
    <link rel="apple-touch-icon" href="/img/favicon.png">

    <!--iOS -->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-title" content="Title">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="480">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Hexo">

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="http://yoursite.com">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Shiny包初探 - Part I | Hexo">
    <meta property="og:description" content="null">
    <meta property="og:article:tag" content="R"> <meta property="og:article:tag" content="visualization"> <meta property="og:article:tag" content="shiny"> <meta property="og:article:tag" content="interactive"> 

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import CSS & jQuery -->
    
        <link rel="stylesheet" href="/css/material.min.css">
        <link rel="stylesheet" href="/css/style.min.css">
        <!-- Config CSS -->


<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #0097A7 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #0097A7 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #0097A7 !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-color: #F5F5F5;
      }

      /* blog_info bottom background */
      #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text{
        background-color: #fff;
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


        <script src="/js/jquery.min.js"></script>
        <script src="/js/queue.js"></script>
    

    <!-- UC Browser Compatible -->
    <script>
        var agent = navigator.userAgent.toLowerCase();
        if(agent.indexOf('ucbrowser')>0) {
            document.write("<link rel=\"stylesheet\" href=\"/css/uc.css\">");
            alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
        }
    </script>

    

    


    <!-- Bing Background -->
    

    <!-- Custom Head -->
    
</head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->

    <!-- Left aligned menu below button -->
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">1.</span> <span class="post-toc-text">基本框架</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">ui.R</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">server.R</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">2.</span> <span class="post-toc-text">交互及视觉效果</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">HTML5函数</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">控件</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">3.</span> <span class="post-toc-text">输入输出</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">数据流向</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">输入输出的转换函数</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">4.</span> <span class="post-toc-text">Reference</span></a></li></ol>

        <!--
        <li class="mdl-menu__item">
            Some Action
        </li>
        -->
    </ul>




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        
            <!-- Random Thumbnail -->
            <div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
            <script>
    var randomNum = Math.floor(Math.random() * 19 + 1);

    $('.post_thumbnail-random').attr('data-original', '/img/random/material-' + randomNum + '.png');
    $('.post_thumbnail-random').addClass('lazy');
</script>

        
    
            <p class="article-headline-p">
                Shiny包初探 - Part I
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/avatar.png" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>John Doe</strong>
        <span>12月 02, 2015</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/tags/R/">R</a></li><li class="mdl-menu__item"><a class="post_tag-link" href="/tags/interactive/">interactive</a></li><li class="mdl-menu__item"><a class="post_tag-link" href="/tags/shiny/">shiny</a></li><li class="mdl-menu__item"><a class="post_tag-link" href="/tags/visualization/">visualization</a>
    </ul>
    

    <!-- Share -->
    <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=Shiny包初探 - Part I&url=http://yoursite.com//2015/12/02/Codage-16-r-shiny-1/index.html&pic=&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                分享到微博
            </li>
        </a>
    

    <!-- Share Twitter -->
    
        <a class="post_share-link" href="https://twitter.com/intent/tweet?text=Shiny包初探 - Part I&url=http://yoursite.com//2015/12/02/Codage-16-r-shiny-1/index.html&via=John Doe" target="_blank">
            <li class="mdl-menu__item">
                分享到 Twitter
            </li>
        </a>
    

    <!-- Share Facebook -->
    
        <a class="post_share-link" href="https://www.facebook.com/sharer/sharer.php?u=http://yoursite.com//2015/12/02/Codage-16-r-shiny-1/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Facebook
            </li>
        </a>
    

    <!-- Share Google+ -->
    
        <a class="post_share-link" href="https://plus.google.com/share?url=http://yoursite.com//2015/12/02/Codage-16-r-shiny-1/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Google+
            </li>
        </a>
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    

    <!-- Share Telegram -->
    
</ul>

</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <p>作为RStudio官网上享有独立域名的一个包，它的名字都那么响亮——shiny。这是据我所知到目前为止功能最好，编写最完备的一个交互可视化包。<a href="http://shiny.rstudio.com/tutorial/" target="_blank" rel="external">详细教程</a>在官网上有介绍，这里只做一个回顾。</p>
<p>&lt;!-- more --&gt;</p>
<h2>基本框架</h2>
<p>编写一个Shiny的应用需要两个基本R Script: ui.R和server.R。前者用于界面交互，一方面从用户处获取动作指令和input，一方面对接server.R处理过后的数据，将图表呈现出来; 后者读取input，处理并计算，生成计算结果和图形，储存在内存中。</p>
<p>另外有两个非必须的元素，一是同一个工作路径下的data文件夹，其中包含需要从本地读取的数据(如果数据从网络获取，则此文件夹非必须)；二是helpers.R文件，其中包含帮助实现数据处理和计算的自定义函数(亦非必须)。</p>
<h3>ui.R</h3>
<p>ui.R中的代码必须包含在下面的框架内：</p>
<p><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">shinyUI(fluidPage(</div><div class="line">    <span class="comment"># code</span></div><div class="line">))</div></pre></td></tr></table></figure></p>
<p><code>fuildPage()</code>可以自适应用户的浏览器尺寸并调整shiny应用中元素的位置。
在此函数内，还有几个主要的函数构成：</p>
<p><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">shinyUI(fluidPage(</div><div class="line">    <span class="comment"># 设定app的主题</span></div><div class="line">    titlePanel(<span class="string">"title panel"</span>),</div><div class="line">    </div><div class="line">    <span class="comment"># 设定app的主体和侧边栏构成</span></div><div class="line">    sidebarLayout(</div><div class="line">        sidebarPanel(<span class="string">"sidebar panel"</span>),</div><div class="line">        mainPanel(<span class="string">"main panel"</span>)</div><div class="line">    )</div><div class="line">))</div></pre></td></tr></table></figure></p>
<h3>server.R</h3>
<p>server.R中的代码框架如下:</p>
<p><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">shinyServer(<span class="keyword">function</span>(input, output)&#123;</div><div class="line">    <span class="comment"># code</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<h2>交互及视觉效果</h2>
<h3>HTML5函数</h3>
<p>具体效果可见<a href="http://shiny.rstudio.com/tutorial/lesson2/" target="_blank" rel="external">官方教程第二课</a>。
既然ui.R负责浏览器页面上的交互，必不可少的也具备转换HTML5语言的函数。</p>
<p><em>表一</em></p>
<table>
<thead>
<tr>
<th>shiny函数</th>
<th>HTML5对照</th>
<th>创建项目</th>
</tr>
</thead>
<tbody>
<tr>
<td>p</td>
<td><code>&lt;p&gt;</code></td>
<td>A paragraph of text</td>
</tr>
<tr>
<td>h1</td>
<td><code>&lt;h1&gt;</code></td>
<td>A first level header</td>
</tr>
<tr>
<td>h2</td>
<td><code>&lt;h2&gt;</code></td>
<td>A second level header</td>
</tr>
<tr>
<td>h3</td>
<td><code>&lt;h3&gt;</code></td>
<td>A third level header</td>
</tr>
<tr>
<td>h4</td>
<td><code>&lt;h4&gt;</code></td>
<td>A fourth level header</td>
</tr>
<tr>
<td>h5</td>
<td><code>&lt;h5&gt;</code></td>
<td>A fifth level header</td>
</tr>
<tr>
<td>h6</td>
<td><code>&lt;h6&gt;</code></td>
<td>A sixth level header</td>
</tr>
<tr>
<td>a</td>
<td><code>&lt;a&gt;</code></td>
<td>A hyper link</td>
</tr>
<tr>
<td>br</td>
<td><code>&lt;br&gt;</code></td>
<td>A line break (e.g. a blank line)</td>
</tr>
<tr>
<td>div</td>
<td><code>&lt;div&gt;</code></td>
<td>A division of text with a uniform style</td>
</tr>
<tr>
<td>span</td>
<td><code>&lt;span&gt;</code></td>
<td>An in-line division of text with a uniform style</td>
</tr>
<tr>
<td>pre</td>
<td><code>&lt;pre&gt;</code></td>
<td>Text ‘as is’ in a fixed width font</td>
</tr>
<tr>
<td>code</td>
<td><code>&lt;code&gt;</code></td>
<td>A formatted block of code</td>
</tr>
<tr>
<td>img</td>
<td><code>&lt;img&gt;</code></td>
<td>An image</td>
</tr>
<tr>
<td>strong</td>
<td><code>&lt;strong&gt;</code></td>
<td>Bold text</td>
</tr>
<tr>
<td>em</td>
<td><code>&lt;em&gt;</code></td>
<td>Italicized text</td>
</tr>
<tr>
<td>HTML</td>
<td></td>
<td>Directly passes a character string as HTML code</td>
</tr>
</tbody>
</table>
<p>这些函数通常可用于<code>siderbarPanel()</code>和<code>mainPanel()</code>函数中，相邻函数之间用&quot;,&quot;隔开。</p>
<p><em>更多的细节设置可参见<a href="http://shiny.rstudio.com/articles/html-tags.html" target="_blank" rel="external">Customize your UI with HTML</a>及<a href="http://shiny.rstudio.com/articles/tag-glossary.html" target="_blank" rel="external">Shiny HTML Tag Glorssary</a>。</em></p>
<h3>控件</h3>
<p>控件用于帮助用户收集数据，是ui.R输入的一种主要方式。和HTML函数一样，控件代码主要放置在<code>sidebarPanel()</code>和<code>mainPanel()</code>中。</p>
<p><em>表二</em></p>
<table>
<thead>
<tr>
<th>函数</th>
<th>控件</th>
</tr>
</thead>
<tbody>
<tr>
<td>actionButton</td>
<td>Action Button</td>
</tr>
<tr>
<td>checkboxGroupInput</td>
<td>A group of check boxes</td>
</tr>
<tr>
<td>checkboxInput</td>
<td>A single check box</td>
</tr>
<tr>
<td>dateInput</td>
<td>A calendar to aid date selection</td>
</tr>
<tr>
<td>dateRangeInput</td>
<td>A pair of calendars for selecting a date range</td>
</tr>
<tr>
<td>fileInput</td>
<td>A file upload control wizard</td>
</tr>
<tr>
<td>helpText</td>
<td>Help text that can be added to an input form</td>
</tr>
<tr>
<td>numericInput</td>
<td>A field to enter numbers</td>
</tr>
<tr>
<td>radioButtons</td>
<td>A set of radio buttons</td>
</tr>
<tr>
<td>selectInput</td>
<td>A box with choices to select from</td>
</tr>
<tr>
<td>sliderInput</td>
<td>A slider bar</td>
</tr>
<tr>
<td>submitButton</td>
<td>A submit button</td>
</tr>
<tr>
<td>textInput</td>
<td>A field to enter text</td>
</tr>
</tbody>
</table>
<p>每个控件的头两个参数都是一样的，都要求用字符串的数据类型作为参数值。第一个是控件的代码名称，这个代码用户看不到，但是会被server.R调用，要求非空；第二个是控件的名称，会作为控件的title显示出来，提示用户这是一个什么类型的控件，但是这个提示不是必须的，可以是个<code>&quot;&quot;</code>空字符串。
各个不同的控件函数还有相应的定制的参数，有的需要指定数值或日期范围，有的是设定一个按钮，视具体的使用情况而定。
以滑条控件为例</p>
<p><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">sliderInput(<span class="string">"range"</span>, </div><div class="line">            label = <span class="string">"Range of interest:"</span>,</div><div class="line">            min = <span class="number">0</span>, max = <span class="number">100</span>, value = c(<span class="number">0</span>, <span class="number">100</span>))</div></pre></td></tr></table></figure></p>
<p>这段代码在app的页面中生成一个最小值为0,、最大值为100的滑条，默认滑条范围也是0到100。用户会在滑条上方看到一个小标题&quot;Range of interest&quot;，但是不会看到&quot;range&quot;字样。&quot;range&quot;的储存控件稍后会提到。</p>
<p><em>更多的信息可见<a href="http://shiny.rstudio.com/gallery/widget-gallery.html" target="_blank" rel="external">Shiny Widgets Gallery</a></em></p>
<h2>输入输出</h2>
<h3>数据流向</h3>
<p>server.R的代码主体是这个样子：</p>
<p><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">shinyServer(<span class="keyword">function</span>(input, output)&#123;</div><div class="line">    <span class="comment"># code</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<p>可以看到自定义函数的两个参数分别为input和output。
实际上，在RStudio读取ui.R中的控件部分时，就将控件函数中的第一个参数作为变量名储存在了<code>input</code>中。这里，可以将<code>input</code>视作一个environment，交互后用户设定的值会覆盖对应变量名下的默认值。
与<code>input</code>环境相对的是<code>output</code>，后者在server.R中生成，接着上面的code为例：</p>
<p><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># server.R</span></div><div class="line"></div><div class="line">shinyServer(</div><div class="line">  <span class="keyword">function</span>(input, output) &#123;</div><div class="line">    output$text1 &lt;- renderText(&#123; </div><div class="line">      paste(<span class="string">"You have chosen a range that goes from"</span>, input$range[<span class="number">1</span>], <span class="string">"to"</span>, input$range[<span class="number">2</span>])</div><div class="line">    &#125;)</div><div class="line">  &#125;</div><div class="line">)</div></pre></td></tr></table></figure></p>
<p><code>input</code>和<code>output</code>两个环境可同时被ui.R和server.R读写。
<code>input</code>环境中的变量range即来自于前文中提到使用的<code>sliderInput()</code>函数。<code>renderText()</code>函数处理完输入数据以后，将运行结果赋值给<code>output</code>环境中的变量<code>text1</code>。
再回到ui.R中：</p>
<p><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># ui.R</span></div><div class="line"></div><div class="line">shinyUI(fluidPage(</div><div class="line">  titlePanel(<span class="string">"Demo"</span>),</div><div class="line">  </div><div class="line">  sidebarLayout(</div><div class="line">    sidebarPanel(</div><div class="line">      sliderInput(<span class="string">"range"</span>, </div><div class="line">        label = <span class="string">"Range of interest:"</span>,</div><div class="line">        min = <span class="number">0</span>, max = <span class="number">100</span>, value = c(<span class="number">0</span>, <span class="number">100</span>))</div><div class="line">    ),</div><div class="line">    </div><div class="line">    mainPanel(</div><div class="line">      textOutput(<span class="string">"text1"</span>))</div><div class="line">  )</div><div class="line">))</div></pre></td></tr></table></figure></p>
<p>在<code>mainPanel()</code>函数中，我们添加了一段代码<code>textOutput(&quot;text1&quot;)</code>，<code>textOutput()</code>函数直接读取<code>output</code>环境中的<code>text1</code>变量(字符串格式调用)，并将其显示在浏览器页面的main panel对应区域中。</p>
<p>至此，shiny两个代码文件中最基本的数据流向已经很明确:</p>
<ol>
<li>ui.R文件：控件代码获取用户的输入，并将数据存储在<code>input</code>环境中；</li>
<li>server.R文件：读取<code>input</code>环境中的输入变量，处理、运算，然后将运算结果存入<code>output</code>环境；</li>
<li>ui.R文件：读取<code>output</code>中的运算结果，转换成浏览器页面可用的图片和文字格式。</li>
</ol>
<p><strong>ui.R中在两个环境的读写均通过函数和相应的字符串形式的变量名来执行，而server.R中，需要按找正常的R语言中的环境及变量的读写格式执行，如<code>input$var1</code>, <code>output$var2</code></strong></p>
<p>另外要注意的是，如果需要调用helpers.R(<code>source(&quot;helpers.R&quot;)</code>)和同工作路径下的data文件夹及所属文件，也只能在server.R文件中调用。</p>
<h3>输入输出的转换函数</h3>
<p>也许你注意到了上一节的两段代码中提到的函数<code>renderText()</code>和<code>textOutput()</code>。前者在server.R中使用，统一用<code>render*()</code>的函数名；后者在ui.R中使用，统一用<code>*Output()</code>的函数名，就像一个从数据端到显示端压缩释放的过程。</p>
<p><em>表三</em></p>
<table>
<thead>
<tr>
<th>render 函数</th>
<th>创建</th>
</tr>
</thead>
<tbody>
<tr>
<td>renderImage</td>
<td>images (saved as a link to a source file)</td>
</tr>
<tr>
<td>renderPlot</td>
<td>plots</td>
</tr>
<tr>
<td>renderPrint</td>
<td>any printed output</td>
</tr>
<tr>
<td>renderTable</td>
<td>data frame, matrix, other table like structures</td>
</tr>
<tr>
<td>renderText</td>
<td>character strings</td>
</tr>
<tr>
<td>renderUI</td>
<td>a Shiny tag object or HTML</td>
</tr>
</tbody>
</table>
<p><em>表四</em></p>
<table>
<thead>
<tr>
<th>*Output函数</th>
<th>显示</th>
</tr>
</thead>
<tbody>
<tr>
<td>htmlOutput</td>
<td>raw HTML</td>
</tr>
<tr>
<td>imageOutput</td>
<td>image</td>
</tr>
<tr>
<td>plotOutput</td>
<td>plot</td>
</tr>
<tr>
<td>tableOutput</td>
<td>table</td>
</tr>
<tr>
<td>textOutput</td>
<td>text</td>
</tr>
<tr>
<td>uiOutput</td>
<td>raw HTML</td>
</tr>
<tr>
<td>verbatimTextOutput</td>
<td>text</td>
</tr>
</tbody>
</table>
<p>两类函数均取用一个参数，<code>render*()</code>系用<code>{}</code>套用R中自带函数或者自定义函数，<code>*Output()系</code>调用<code>output</code>环境中的变量名(字符串形式)。</p>
<p>shiny的思路、构造基本如此。
接下来要研究的是如何搭建shiny的公司平台，如何让shiny应用的运算更快速、界面更优雅。</p>
<hr>
<h2>Reference</h2>
<ul>
<li><a href="http://shiny.rstudio.com/tutorial/" target="_blank" rel="external">Shiny Tutorial</a></li>
</ul>

    

    
</div>


                

                <!-- Post Comments -->
                
                    







                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/2015/11/30/sina_weibo_big_data_competition/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2015/12/04/2015-12-04-review-my-new-hp-spectre-x360-2-in-1-convertible-laptop/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.png);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/avatar.png" alt="John Doe's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        youremail@email.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="#" target="_blank" title="Email Me">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        Email Me
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/" target="_self">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2017/04/">四月 2017<span class="sidebar_archives-count">28</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/03/">三月 2017<span class="sidebar_archives-count">37</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/02/">二月 2017<span class="sidebar_archives-count">12</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/01/">一月 2017<span class="sidebar_archives-count">12</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/12/">十二月 2016<span class="sidebar_archives-count">18</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/11/">十一月 2016<span class="sidebar_archives-count">24</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/10/">十月 2016<span class="sidebar_archives-count">39</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/09/">九月 2016<span class="sidebar_archives-count">32</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/08/">八月 2016<span class="sidebar_archives-count">32</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/07/">七月 2016<span class="sidebar_archives-count">21</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/06/">六月 2016<span class="sidebar_archives-count">33</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/05/">五月 2016<span class="sidebar_archives-count">20</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/04/">四月 2016<span class="sidebar_archives-count">15</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/03/">三月 2016<span class="sidebar_archives-count">19</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/02/">二月 2016<span class="sidebar_archives-count">16</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/01/">一月 2016<span class="sidebar_archives-count">19</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/12/">十二月 2015<span class="sidebar_archives-count">20</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/11/">十一月 2015<span class="sidebar_archives-count">30</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/10/">十月 2015<span class="sidebar_archives-count">30</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/09/">九月 2015<span class="sidebar_archives-count">27</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/08/">八月 2015<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/07/">七月 2015<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/06/">六月 2015<span class="sidebar_archives-count">10</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/05/">五月 2015<span class="sidebar_archives-count">7</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/04/">四月 2015<span class="sidebar_archives-count">11</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/03/">三月 2015<span class="sidebar_archives-count">10</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/02/">二月 2015<span class="sidebar_archives-count">14</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/01/">一月 2015<span class="sidebar_archives-count">6</span></a></li><li><a class="sidebar_archives-link" href="/archives/2014/12/">十二月 2014<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2014/11/">十一月 2014<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2014/10/">十月 2014<span class="sidebar_archives-count">6</span></a></li><li><a class="sidebar_archives-link" href="/archives/2014/09/">九月 2014<span class="sidebar_archives-count">6</span></a></li><li><a class="sidebar_archives-link" href="/archives/2014/08/">八月 2014<span class="sidebar_archives-count">9</span></a></li><li><a class="sidebar_archives-link" href="/archives/2014/07/">七月 2014<span class="sidebar_archives-count">6</span></a></li><li><a class="sidebar_archives-link" href="/archives/2014/06/">六月 2014<span class="sidebar_archives-count">7</span></a></li><li><a class="sidebar_archives-link" href="/archives/2014/05/">五月 2014<span class="sidebar_archives-count">11</span></a></li><li><a class="sidebar_archives-link" href="/archives/2014/04/">四月 2014<span class="sidebar_archives-count">32</span></a></li><li><a class="sidebar_archives-link" href="/archives/2014/03/">三月 2014<span class="sidebar_archives-count">34</span></a></li><li><a class="sidebar_archives-link" href="/archives/2014/02/">二月 2014<span class="sidebar_archives-count">14</span></a></li><li><a class="sidebar_archives-link" href="/archives/2014/01/">一月 2014<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2013/12/">十二月 2013<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2013/07/">七月 2013<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2013/06/">六月 2013<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2013/04/">四月 2013<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2013/03/">三月 2013<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2013/02/">二月 2013<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2013/01/">一月 2013<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2012/12/">十二月 2012<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2012/10/">十月 2012<span class="sidebar_archives-count">6</span></a></li><li><a class="sidebar_archives-link" href="/archives/2012/09/">九月 2012<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2012/07/">七月 2012<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2012/06/">六月 2012<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2012/05/">五月 2012<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2011/08/">八月 2011<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2011/07/">七月 2011<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2011/06/">六月 2011<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2011/05/">五月 2011<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2011/04/">四月 2011<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2011/03/">三月 2011<span class="sidebar_archives-count">5</span></a></li><li><a class="sidebar_archives-link" href="/archives/2011/02/">二月 2011<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2010/12/">十二月 2010<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2010/11/">十一月 2010<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/archives/2010/09/">九月 2010<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2010/07/">七月 2010<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/archives/2010/06/">六月 2010<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2010/02/">二月 2010<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2010/01/">一月 2010<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2009/09/">九月 2009<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2009/07/">七月 2009<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2009/05/">五月 2009<span class="sidebar_archives-count">5</span></a></li><li><a class="sidebar_archives-link" href="/archives/2009/04/">四月 2009<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2009/03/">三月 2009<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2009/02/">二月 2009<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2008/07/">七月 2008<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2008/06/">六月 2008<span class="sidebar_archives-count">1</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    

    <!-- Pages  -->
    

    <!-- Article Number  -->
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->

    <div class="sidebar-divider"></div>


<!-- Theme Material -->

    <a href="https://github.com/viosey/hexo-theme-material"  class="sidebar-footer-text-a" target="_blank">
        <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
            主题 - Material
            <span class="sidebar-badge badge-circle">i</span>
        </div>
    </a>


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    
        <a href="https://twitter.com/twitter" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-twitter.svg);">
                <span class="visuallyhidden">Twitter</span>
            </button><!--
     --></a>
    

    <!-- Facebook -->
    
        <a href="https://www.facebook.com/facebook" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-facebook.svg);">
                <span class="visuallyhidden">Facebook</span>
            </button><!--
     --></a>
    

    <!-- Google + -->
    
        <a href="https://www.google.com/" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-gplus.svg);">
                <span class="visuallyhidden">Google Plus</span>
            </button><!--
     --></a>
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©&nbsp;
            <script type="text/javascript">
                var fd = new Date();
                document.write(fd.getFullYear());
            </script>
            &nbsp;Hexo
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import File -->

    <script src="/js/lazyload.min.js"></script>
    <script src="/js/js.min.js"></script>



    <script src="/js/nprogress.js"></script>


<script type="text/javascript">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>
















<!-- Window Load-->
<script>
    $(window).load(function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });
</script>

<!-- MathJax Load-->

<script>
    <!-- Offer LazyLoad -->
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    <!-- Start Queue -->
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

                </main>
            </div>
        </body>
    
</html>
