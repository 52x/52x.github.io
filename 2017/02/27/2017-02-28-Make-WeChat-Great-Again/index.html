<!DOCTYPE html>
<html lang="zh">
    <head>
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.3.4 -->

    <!-- Title -->
    
    <title>
        
            Make WeChat Great Again | 
        
        Hexo
    </title>

    <!-- Meta & Info -->
    <meta charset="utf-8">

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">
    
    
    
    
    
    

    <meta http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#0097A7">
    <meta name="author" content="John Doe">
    <meta name="description" content="null">
    <meta name="keywords" content="null,Reverse Engineering">

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/favicon.png">
    <link rel="icon" sizes="192x192" href="/img/favicon.png">
    <link rel="apple-touch-icon" href="/img/favicon.png">

    <!--iOS -->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-title" content="Title">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="480">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Hexo">

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="http://yoursite.com">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Make WeChat Great Again | Hexo">
    <meta property="og:description" content="null">
    <meta property="og:article:tag" content="Reverse Engineering"> 

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import CSS & jQuery -->
    
        <link rel="stylesheet" href="/css/material.min.css">
        <link rel="stylesheet" href="/css/style.min.css">
        <!-- Config CSS -->


<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #0097A7 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #0097A7 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #0097A7 !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-color: #F5F5F5;
      }

      /* blog_info bottom background */
      #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text{
        background-color: #fff;
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


        <script src="/js/jquery.min.js"></script>
        <script src="/js/queue.js"></script>
    

    <!-- UC Browser Compatible -->
    <script>
        var agent = navigator.userAgent.toLowerCase();
        if(agent.indexOf('ucbrowser')>0) {
            document.write("<link rel=\"stylesheet\" href=\"/css/uc.css\">");
            alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
        }
    </script>

    

    


    <!-- Bing Background -->
    

    <!-- Custom Head -->
    
</head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->

    <!-- Left aligned menu below button -->
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">1.</span> <span class="post-toc-text">工欲善其事必先利其器</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">2.</span> <span class="post-toc-text">之后就是不停地 Hook</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">关闭『发现』页面的各种入口 - 清君侧</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">修改微信运动步数 - 装逼党的自我修养</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">2.3.</span> <span class="post-toc-text">小红点消除计划 - 我想静静</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">2.4.</span> <span class="post-toc-text">夜间模式 - 辣眼睛</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">2.5.</span> <span class="post-toc-text">阻止撤回消息 - 知道真相的我眼泪掉下来</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">2.6.</span> <span class="post-toc-text">要屏蔽 - 不要免打扰</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">3.</span> <span class="post-toc-text">后记</span></a></li></ol>

        <!--
        <li class="mdl-menu__item">
            Some Action
        </li>
        -->
    </ul>




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        
            <!-- Random Thumbnail -->
            <div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
            <script>
    var randomNum = Math.floor(Math.random() * 19 + 1);

    $('.post_thumbnail-random').attr('data-original', '/img/random/material-' + randomNum + '.png');
    $('.post_thumbnail-random').addClass('lazy');
</script>

        
    
            <p class="article-headline-p">
                Make WeChat Great Again
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/avatar.png" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>John Doe</strong>
        <span>2月 28, 2017</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/tags/Reverse-Engineering/">Reverse Engineering</a>
    </ul>
    

    <!-- Share -->
    <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=Make WeChat Great Again&url=http://yoursite.com//2017/02/27/2017-02-28-Make-WeChat-Great-Again/index.html&pic=&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                分享到微博
            </li>
        </a>
    

    <!-- Share Twitter -->
    
        <a class="post_share-link" href="https://twitter.com/intent/tweet?text=Make WeChat Great Again&url=http://yoursite.com//2017/02/27/2017-02-28-Make-WeChat-Great-Again/index.html&via=John Doe" target="_blank">
            <li class="mdl-menu__item">
                分享到 Twitter
            </li>
        </a>
    

    <!-- Share Facebook -->
    
        <a class="post_share-link" href="https://www.facebook.com/sharer/sharer.php?u=http://yoursite.com//2017/02/27/2017-02-28-Make-WeChat-Great-Again/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Facebook
            </li>
        </a>
    

    <!-- Share Google+ -->
    
        <a class="post_share-link" href="https://plus.google.com/share?url=http://yoursite.com//2017/02/27/2017-02-28-Make-WeChat-Great-Again/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Google+
            </li>
        </a>
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    

    <!-- Share Telegram -->
    
</ul>

</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <p>关闭朋友圈有一年多了，突然有一天微信的策略变了，在关闭朋友圈的同时也不让别人查看自己的朋友圈了。有妹子表示看不到我朋友圈很不爽，于是我决定对微信进行一番改造！初步实现效果：</p>
<ol>
<li>关闭『发现』页面的『朋友圈』、『购物』和『游戏』入口</li>
<li>修改微信运动步数</li>
<li>去除各种小红点提示</li>
<li>设置夜间模式</li>
<li>阻止撤回消息</li>
<li>屏蔽群&amp;好友消息</li>
</ol>
<p><strong>手机无需越狱</strong>，项目 GitHub 地址: <a href="https://github.com/yulingtianxia/FishChat" target="_blank" rel="external">FishChat</a>，Make WeChat Great Again！</p>
<p>&lt;!--more--&gt;</p>
<h2>工欲善其事必先利其器</h2>
<p>因为没有越狱手机，所以不是直接写 tweak 放手机里，而是需要将 <code>CaptainHook</code> 工程编译出的 dylib 注入到已砸壳 app 的二进制文件中。同样因为没有越狱机，所以砸壳的文件只能从 某 P 助手下载了。</p>
<p>我写了一个 Shell 脚本 <a href="https://github.com/yulingtianxia/FishChat/blob/master/Shell/autoswimfi.sh" target="_blank" rel="external">autoswimfi.sh</a> 帮我完成一些重复性的任务：</p>
<ol>
<li>查找可用的 iPhone 开发者证书</li>
<li>解压 ipa 文件</li>
<li>拷贝 mobileprovision 文件和要注入的 dylib 文件到 app 文件夹中</li>
<li>向 app 中可执行文件的 <code>Load Commands</code> 段中加入一条加载 dylib 的指令</li>
<li>对 app 中所有的 app，appx，framework，dylib 文件用第 1 步获取的证书进行重签名</li>
<li>打包签名好的 ipa 文件</li>
<li>删除上述过程中产生的中间文件</li>
<li>通过 USB 线安装 ipa 文件手机上</li>
</ol>
<p><a href="https://github.com/yulingtianxia/FishChat/blob/master/Shell/autoswimfi.sh" target="_blank" rel="external">autoswimfi.sh</a> 需要传入的三个参数分别为：已砸壳的 ipa 文件，没过期的 mobileprovision 文件，要注入的 dylib 文件。</p>
<p>犹豫了很久，还是贴上脚本代码，壮气势充篇幅吧。</p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"># !/bin/bash</div><div class="line">SOURCEIPA=&quot;$1&quot;</div><div class="line">MOBILEPROV=&quot;$2&quot;</div><div class="line">DYLIB=&quot;$3&quot;</div><div class="line"></div><div class="line">cd $&#123;SOURCEIPA%/*&#125;</div><div class="line"></div><div class="line">security find-identity -v -p codesigning &gt; cers.txt</div><div class="line">while IFS=&apos;&apos; read -r line || [[ -n &quot;$line&quot; ]]; do</div><div class="line">    if [[ &quot;$line&quot; =~ &quot;iPhone Developer&quot; ]]; then</div><div class="line">      DEVELOPER=$&#123;line:47:$&#123;#line&#125;-48&#125;</div><div class="line">    fi</div><div class="line">done &lt; cers.txt</div><div class="line"></div><div class="line">unzip -qo &quot;$SOURCEIPA&quot; -d extracted</div><div class="line"></div><div class="line">APPLICATION=$(ls extracted/Payload/)</div><div class="line"></div><div class="line">echo &quot;Copying dylib and mobileprovision&quot;</div><div class="line">cp &quot;$DYLIB&quot; &quot;extracted/Payload/$APPLICATION/$&#123;DYLIB##*/&#125;&quot;</div><div class="line">cp &quot;$MOBILEPROV&quot; &quot;extracted/Payload/$APPLICATION/embedded.mobileprovision&quot;</div><div class="line"></div><div class="line">echo &quot;Insert dylib into Mach-O file&quot;</div><div class="line">yololib &quot;extracted/Payload/$APPLICATION/$&#123;APPLICATION%.*&#125;&quot; &quot;$&#123;DYLIB##*/&#125;&quot;</div><div class="line"></div><div class="line">echo &quot;Resigning with certificate: $DEVELOPER&quot;</div><div class="line">find -d extracted  \( -name &quot;*.app&quot; -o -name &quot;*.appex&quot; -o -name &quot;*.framework&quot; -o -name &quot;*.dylib&quot; \) &gt; directories.txt</div><div class="line">security cms -D -i &quot;extracted/Payload/$APPLICATION/embedded.mobileprovision&quot; &gt; t_entitlements_full.plist</div><div class="line">/usr/libexec/PlistBuddy -x -c &apos;Print:Entitlements&apos; t_entitlements_full.plist &gt; t_entitlements.plist</div><div class="line">while IFS=&apos;&apos; read -r line || [[ -n &quot;$line&quot; ]]; do</div><div class="line">    /usr/bin/codesign --continue -f -s &quot;$DEVELOPER&quot; --entitlements &quot;t_entitlements.plist&quot;  &quot;$line&quot;</div><div class="line">done &lt; directories.txt</div><div class="line"></div><div class="line">echo &quot;Creating the Signed IPA&quot;</div><div class="line">cd extracted</div><div class="line">zip -qry ../extracted.ipa *</div><div class="line">cd ..</div><div class="line"></div><div class="line">rm -rf &quot;extracted&quot;</div><div class="line">rm directories.txt</div><div class="line">rm cers.txt</div><div class="line">rm t_entitlements.plist</div><div class="line">rm t_entitlements_full.plist</div><div class="line"></div><div class="line">echo &quot;Installing APP to your iOS Device&quot;</div><div class="line">mobiledevice install_app extracted.ipa</div></pre></td></tr></table></figure></p>
<p>想要让 <a href="https://github.com/yulingtianxia/FishChat/blob/master/Shell/autoswimfi.sh" target="_blank" rel="external">autoswimfi.sh</a> 一气呵成执行下去，需要依赖以下几项：</p>
<ol>
<li>Mac 上需要有唯一可用的 iPhone 开发者证书，如果有多个，默认选最后一个</li>
<li><code>yololib</code> 工具用于注入 dylib 文件到二进制文件中</li>
<li><code>mobiledevice</code> 可以将 ipa 安装到 USB 连接到 Mac 上的手机中</li>
<li>一个可用的 mobileprovision 文件，十分关键，可以新建个工程在自己手机 Run 一下，新生成的 app 里面就有 mobileprovision 文件。</li>
</ol>
<p>在这里多再说几句：</p>
<ol>
<li>一年多前我尝试安装 <code>iOSOpenDev</code> 很多次，一直失败，就当前辈们劝我还是用 <code>theos</code> 稳妥的时候，我觉得还是再试一次吧，果然还是失败了。不过新建 Xcode 项目选择 template 时却出现了 <code>iOSOpenDev</code> 哈哈哈哈！</li>
<li>一开始用 <code>insert_dylib</code> 注入 dylib 后 crash，后来用 <code>yololib</code> 就好了！不过 <code>yololib</code> 有个 bug 是对 dylib 的版本号有要求。这里可以直接改源码，把 <code>DYLIB_CURRENT_VER</code> 和 <code>DYLIB_COMPATIBILITY_VERSION</code> 的宏定义都改成 <code>0x0000</code>。懒人直接用我上传的 <a href="https://github.com/yulingtianxia/FishChat/blob/master/yololib" target="_blank" rel="external">yololib</a>。</li>
<li>如果要查看 Mach-O 文件完整信息，建议用 MachOView。<code>otool -l</code> 打印所有的 <code>Load Commands</code>，建议搭配 <code>grep</code> 进行正则过滤。<code>otool -L</code> 可以查看使用的库文件。</li>
<li>网上一些重签名工具没有将插件拓展或 Watch 中的 dylib 重签名，导致签名失败等问题。微信的 Apple Watch 客户端用 Swift 写的，因为还没有 ABI 稳定，所以只好把大量 dylib 打包进去。</li>
<li>可以使用 <code>Cycript</code> 来完成一些调试工作，这样就不用一次次打 Log 了。同样也可以打印出视图层级，不过建议有条件的同学用 Reveal 2，已经支持 USB 调试了。<code>Cycript</code> 只支持在同网段下连接到手机 IP 的 <code>8888</code> 端口，cy 脚本还是跟 <code>lldb</code> 命令有一些差别的。如果 <code>Cycript</code> 官网的 sdk 不好用，那就用用我上传的吧：<a href="https://github.com/yulingtianxia/FishChat/tree/master/Cycript.framework" target="_blank" rel="external"><code>Cycript.framework</code></a></li>
<li>找到视图对应的类之后，就需要在 <code>class-dump</code> 得到的头文件寻找蛛丝马迹了。Dump 出的文件：<a href="https://github.com/yulingtianxia/FishChat/tree/master/WeChat-Headers" target="_blank" rel="external">WeChat-Headers</a></li>
<li>查看设备 Log 最简单的方式当然是从 Xcode-&gt;Devices-&gt;你的设备。</li>
<li>安装时如果遇到 <code>AMDeviceSecureInstallApplication</code> 安装失败，可以将工程 Clean 和 Clean Build Folder 后重新编译，再跑一次我的脚本。如果还不行，尝试用 iTools 等软件安装 ipa 到手机上。</li>
</ol>
<h2>之后就是不停地 Hook</h2>
<p>我曾经在『<a href="http://yulingtianxia.com/blog/2016/05/06/Let-your-WeChat-for-Mac-never-revoke-messages/" target="_blank" rel="external">让你的微信不再被人撤回消息</a>』这篇文章中说过：</p>
<blockquote>
<p>之前看的一些逆向的教程里，感觉前期工作都是装软件配环境，噼里啪啦命令一顿敲，整的挺玄乎，其实都是用人家现成儿的工具做些事情，美其名曰『站在巨人的肩膀上』，这里不再赘述。在我看来第一个真正意义上有难度的事情就是一个字儿：『猜』！</p>
</blockquote>
<p>是啊，头文件有了，UI 层级有了，该猜了！那么检验是否猜对需要做啥？Hook 呗！<code>CaptainHook</code> 的用法很简单，新建工程的模板注释里面已经写得很详细了，就不赘述了。</p>
<blockquote>
<p>Mac 上需要安装 <code>iOSOpenDev</code> 或 <code>theos</code>，本项目新建工程时使用 <code>iOSOpenDev</code> 的 <code>CaptainHook</code> 模板。编译的时候要选自己的手机，不要选模拟器。</p>
</blockquote>
<h3>关闭『发现』页面的各种入口 - 清君侧</h3>
<p>在关掉各种乱码七糟的功能之后，发现页面仍留下几个无法关闭的入口。本次逆向微信的动机也由此引发：我只想关闭朋友圈入口，并没想关闭自己朋友圈内容，不过微信的这项策略也是很符合一些人的需求的。很多人真的想关闭自己朋友圈不让别人看，不过将这个需求跟旧的『关闭朋友圈入口』功能强绑定在一起，就有些绑架用户的味道了，鱼和熊掌不可兼得啊！不过关闭朋友圈后，别人依然能看到自己在 TimeLine 上新发的内容，但是一旦点击头像进入主页后就提示『该朋友暂未开启朋友圈』，奇怪的是回到自己的 TimeLine 上后，以前那条新发的内容就消失了。我觉得这不是 bug，而是产品策略。微信在努力保持用户粘性，不得不在用户需求和产品数据之间权衡。好吧，扯远了。。。</p>
<p>我只保留了这俩『活儿好不粘人』的工具类入口：</p>
<p>&lt;img src=&quot;https://github.com/yulingtianxia/FishChat/blob/master/Images/wechat_discover.PNG?raw=true&quot; width=&quot;50%&quot; height=&quot;50%&quot;&gt;</p>
<p>其实扫一扫页面可以通过右上角加号更快进入，也可以去掉。小程序其实平时也基本不用，偶尔用的时候现搜，鸡肋入口。不能再干掉了，否则还不如索性干掉整个发现页面。</p>
<p>删入口有两种思路，一种是删数据源，另一种是 hook <code>UITableViewDelegate</code> 和 <code>UITableViewDataSource</code>。发现页面的 VC 是 <code>FindFriendEntryViewController</code>，发现数据源数组包含的结构体需要花功夫猜下含义，索性简单粗暴 Plan B。</p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">// 关闭朋友圈入口</div><div class="line">CHOptimizedMethod2(self, CGFloat, FindFriendEntryViewController, tableView, UITableView *, tableView, heightForRowAtIndexPath, NSIndexPath *, indexPath)</div><div class="line">&#123;</div><div class="line">    NSIndexPath *timelineIndexPath = [self valueForKeyPath:@&quot;m_WCTimeLineIndexPath&quot;];</div><div class="line">    if ([indexPath isEqual: timelineIndexPath] || indexPath.section == 2) &#123;</div><div class="line">        NSLog(@&quot;## Hide Time Line Entry ##&quot;);</div><div class="line">        return 0;</div><div class="line">    &#125;</div><div class="line">    return CHSuper2(FindFriendEntryViewController, tableView, tableView, heightForRowAtIndexPath, indexPath);</div><div class="line">&#125;</div><div class="line"></div><div class="line">CHOptimizedMethod2(self, UITableViewCell *, FindFriendEntryViewController, tableView, UITableView *, tableView, cellForRowAtIndexPath, NSIndexPath *, indexPath)</div><div class="line">&#123;</div><div class="line">    NSIndexPath *timelineIndexPath = [self valueForKeyPath:@&quot;m_WCTimeLineIndexPath&quot;];</div><div class="line">    UITableViewCell *cell = CHSuper2(FindFriendEntryViewController, tableView, tableView, cellForRowAtIndexPath, indexPath);</div><div class="line">    if ([indexPath isEqual: timelineIndexPath] || indexPath.section == 2) &#123;</div><div class="line">        NSLog(@&quot;## Hide Time Line Entry ##&quot;);</div><div class="line">        cell.hidden = YES;</div><div class="line">        for (UIView *subview in cell.subviews) &#123;</div><div class="line">            [subview removeFromSuperview];</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    return cell;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>简单粗暴地将想要隐藏的入口 Cell 高度设为 <code>0</code> 后发现 <code>subview</code> 被挤出来了，我日，只好再干掉这些 <code>subview</code>。最后记得在页面出现时刷新下 table 数据：</p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">CHOptimizedMethod1(self, void, FindFriendEntryViewController, viewDidAppear, BOOL, animated)</div><div class="line">&#123;</div><div class="line">    CHSuper1(FindFriendEntryViewController, viewDidAppear, animated);</div><div class="line">    [self performSelector:@selector(reloadData)];</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3>修改微信运动步数 - 装逼党的自我修养</h3>
<p>修改微信运动步数的方法网上一搜就有好多文章，就是 hook <code>WCDeviceStepObject</code> 的 <code>m7StepCount</code> 方法罢了。我在这里为了更方便地装逼，当然不能 hook 时把步数写死了，随机数也不够屌，要装逼就装到位：</p>
<p>先到设置页面：</p>
<p>&lt;img src=&quot;https://github.com/yulingtianxia/FishChat/blob/master/Images/wechat_setting_keyboard.PNG?raw=true&quot; width=&quot;50%&quot; height=&quot;50%&quot;&gt;</p>
<p>在文本框输入个正数：</p>
<p>&lt;img src=&quot;https://github.com/yulingtianxia/FishChat/blob/master/Images/wechat_setting_stepcount.PNG?raw=true&quot; width=&quot;50%&quot; height=&quot;50%&quot;&gt;</p>
<p>完美：</p>
<p>&lt;img src=&quot;https://github.com/yulingtianxia/FishChat/blob/master/Images/wechat_mystepcount.PNG?raw=true&quot; width=&quot;50%&quot; height=&quot;50%&quot;&gt;</p>
<blockquote>
<p><strong>==我就问你怕不怕==</strong></p>
</blockquote>
<p>微信的一些列表页面是由数据来驱动 UI 的。table 对应 <code>MMTableViewInfo</code>，section 对应 <code>MMTableViewSectionInfo</code>，cell 对应 <code>MMTableViewCellInfo</code>。以前做项目时也见到过类似的框架，理解起来不难。但是这种过度的封装完全改变了原有系统 API，使用者碰到问题需要深入到框架去调试，又因为是内部框架，网上也搜不到方案。所以要求框架作者规范的编码习惯和较强的能力。又扯远了，我是用 <code>FishConfigurationCenter</code> 这个单例类来保存状态值的，目前还没在持久层写入磁盘。可以在 <code>MMTableViewCellInfo</code> 头文件看到微信中常用的 cell 是封装好的，这里直接获取个带文本框的就行了。我顺便还加了个夜间模式的开关 cell：</p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">CHDeclareMethod0(void, NewSettingViewController, reloadTableData)</div><div class="line">&#123;</div><div class="line">    CHSuper0(NewSettingViewController, reloadTableData);</div><div class="line">    MMTableViewInfo *tableInfo = [self valueForKeyPath:@&quot;m_tableViewInfo&quot;];</div><div class="line">    MMTableViewSectionInfo *sectionInfo = [objc_getClass(&quot;MMTableViewSectionInfo&quot;) sectionInfoDefaut];</div><div class="line">    MMTableViewCellInfo *nightCellInfo = [objc_getClass(&quot;MMTableViewCellInfo&quot;) switchCellForSel:@selector(handleNightMode:) target:[FishConfigurationCenter sharedInstance] title:@&quot;夜间模式&quot; on:[FishConfigurationCenter sharedInstance].isNightMode];</div><div class="line">    [sectionInfo addCell:nightCellInfo];</div><div class="line">    MMTableViewCellInfo *stepcountCellInfo = [objc_getClass(&quot;MMTableViewCellInfo&quot;) editorCellForSel:@selector(handleStepCount:) target:[FishConfigurationCenter sharedInstance] tip:@&quot;请输入步数&quot; focus:NO text:[NSString stringWithFormat:@&quot;%ld&quot;, (long)[FishConfigurationCenter sharedInstance].stepCount]];</div><div class="line">    [sectionInfo addCell:stepcountCellInfo];</div><div class="line">    [tableInfo insertSection:sectionInfo At:0];</div><div class="line">    MMTableView *tableView = [tableInfo getTableView];</div><div class="line">    [tableView reloadData];</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>然后获取步数的时候从单例里取值就可以啦：</p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">// 微信运动步数</div><div class="line">CHOptimizedMethod0(self, unsigned int, WCDeviceStepObject, m7StepCount)</div><div class="line">&#123;</div><div class="line">    if ([FishConfigurationCenter sharedInstance].stepCount == 0) &#123;</div><div class="line">        [FishConfigurationCenter sharedInstance].stepCount = CHSuper0(WCDeviceStepObject, m7StepCount);</div><div class="line">    &#125;</div><div class="line">    return [FishConfigurationCenter sharedInstance].stepCount;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3>小红点消除计划 - 我想静静</h3>
<p>微信真的是越来越臃肿，大有追赶 QQ 的架势，连小红点也是越来越多。『发现』页面撸的挺干净了，我就不信扫一扫入口还能有小红点（flag 已立）。『我』Tab 页里什么钱包啊卡包啊老有小红点，真烦人，老得点进去。</p>
<p>通过查看视图层级发现小红点来源有两种，一种是 TabBar 上的小红点，另一种是 cell 上的小红点。前者是系统 API 带的，后者是微信的 <code>MMBadgeView</code> 类实现的。</p>
<p>微信的 <code>MMTabBarController</code> 继承于 <code>UITabBarController</code>，它提供了几个设置小红点的快捷方法，统统 hook 掉，屏蔽后两个『发现』和『我』上的小红点：</p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">CHOptimizedMethod2(self, void, MMTabBarController, setTabBarBadgeImage, id, arg1, forIndex, unsigned int, arg2)</div><div class="line">&#123;</div><div class="line">    if (arg2 != 2 &amp;&amp; arg2 != 3) &#123;</div><div class="line">        CHSuper2(MMTabBarController, setTabBarBadgeImage, arg1, forIndex, arg2);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">CHOptimizedMethod2(self, void, MMTabBarController, setTabBarBadgeString, id, arg1, forIndex, unsigned int, arg2)</div><div class="line">&#123;</div><div class="line">    if (arg2 != 2 &amp;&amp; arg2 != 3) &#123;</div><div class="line">        CHSuper2(MMTabBarController, setTabBarBadgeString, arg1, forIndex, arg2);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">CHOptimizedMethod2(self, void, MMTabBarController, setTabBarBadgeValue, id, arg1, forIndex, unsigned int, arg2)</div><div class="line">&#123;</div><div class="line">    if (arg2 != 2 &amp;&amp; arg2 != 3) &#123;</div><div class="line">        CHSuper2(MMTabBarController, setTabBarBadgeValue, arg1, forIndex, arg2);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>去除 <code>MMBadgeView</code> 就更简单了，直接隐藏掉就好了。不直接 remove 的好处是可以保留聊天页面的小红点提醒，而其他页面的小红点被隐藏了。我猜原因是聊天页面的小红点在添加上去后会设置下 <code>hidden = NO</code>，因为 cell 是重用的。</p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">CHOptimizedMethod1(self, void, UIView, didAddSubview, UIView *, subview)</div><div class="line">&#123;</div><div class="line">    if ([subview isKindOfClass:NSClassFromString(@&quot;MMBadgeView&quot;)]) &#123;</div><div class="line">        subview.hidden = YES;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3>夜间模式 - 辣眼睛</h3>
<blockquote>
<p>她说睡了，其实是躺在被窝里继续玩手机罢了。</p>
</blockquote>
<p>夜间模式其实也就是主题适配，这个手机 QQ 玩的是最 6 的了，无人能敌。要想做一个完美的皮肤引擎是很庞大的工作，不仅是多套色值方案的存储和切换问题，还有多套图片资源的适配问题。这里由于时间仓促，只做了个很辣眼睛的夜间模式，而且切换回来需要杀进程重新进：</p>
<p>&lt;img src=&quot;https://github.com/yulingtianxia/FishChat/blob/master/Images/wechat_about.PNG?raw=true&quot; width=&quot;50%&quot; height=&quot;50%&quot;&gt;</p>
<p>这么辣眼睛的审美会被狂吐槽，就不贴代码了，有兴趣的去项目里查看哈哈。</p>
<h3>阻止撤回消息 - 知道真相的我眼泪掉下来</h3>
<p>有时候被撤回的消息看到了会后悔的，但这依然阻止不了我的好奇心+强迫症。</p>
<p>在 『<a href="http://yulingtianxia.com/blog/2016/05/06/Let-your-WeChat-for-Mac-never-revoke-messages/" target="_blank" rel="external">让你的微信不再被人撤回消息</a>』 里我介绍过用 Hopper 逆向的方法。直接看汇编代码来的不那么直接，还是 hook OC 代码稳一些。</p>
<p>撤回消息时会先调用 <code>-[CMessageMgr onRevokeMsg:]</code> 方法，然后调用 <code>-[CMessageMgr DelMsg:MsgList: DelAll:]</code> 方法删除消息。随意在撤回的时候记录下标志位就好，不影响删除消息功能。</p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">// 阻止撤回消息</div><div class="line">CHOptimizedMethod1(self, void, CMessageMgr, onRevokeMsg, id, msg)</div><div class="line">&#123;</div><div class="line">    [FishConfigurationCenter sharedInstance].revokeMsg = YES;</div><div class="line">    CHSuper1(CMessageMgr, onRevokeMsg, msg);</div><div class="line">&#125;</div><div class="line"></div><div class="line">CHDeclareMethod3(void, CMessageMgr, DelMsg, id, arg1, MsgList, id, arg2, DelAll, BOOL, arg3)</div><div class="line">&#123;</div><div class="line">    if ([FishConfigurationCenter sharedInstance].revokeMsg) &#123;</div><div class="line">        [FishConfigurationCenter sharedInstance].revokeMsg = NO;</div><div class="line">    &#125;</div><div class="line">    else &#123;</div><div class="line">        CHSuper3(CMessageMgr, DelMsg, arg1, MsgList, arg2, DelAll, arg3);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3>要屏蔽 - 不要免打扰</h3>
<p>详细内容请见：<a href="http://yulingtianxia.com/blog/2017/03/06/How-to-hook-the-correct-method-in-reverse-engineering" target="_blank" rel="external">如何在逆向工程中 Hook 得更准 - 微信屏蔽好友&amp;群消息实战</a></p>
<h2>后记</h2>
<p>若不是时间匆忙，或许还可以让微信变得更伟大。比如加个『彻底清理缓存』按钮。平时使用微信确实有很多不爽的地方，尤其是群功能太弱太弱了。我还想加个功能就是如果对方发了超过 30s 的语音，并且对方不是妹子也不是老板不是亲戚，此时自动回复 #&amp;*DF@$@(M!.....我没太听清，请你重新再发一遍？</p>
<p>此项目仅用于逆向工程交流学习，黑产死开！</p>

    

    
</div>


                

                <!-- Post Comments -->
                
                    







                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/2017/02/25/2017-02-26-post/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2017/03/01/2017-03-01-gogetfatalhttps/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.png);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/avatar.png" alt="John Doe's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        youremail@email.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="#" target="_blank" title="Email Me">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        Email Me
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/" target="_self">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2017/04/">四月 2017<span class="sidebar_archives-count">28</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/03/">三月 2017<span class="sidebar_archives-count">37</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/02/">二月 2017<span class="sidebar_archives-count">12</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/01/">一月 2017<span class="sidebar_archives-count">12</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/12/">十二月 2016<span class="sidebar_archives-count">18</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/11/">十一月 2016<span class="sidebar_archives-count">24</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/10/">十月 2016<span class="sidebar_archives-count">39</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/09/">九月 2016<span class="sidebar_archives-count">32</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/08/">八月 2016<span class="sidebar_archives-count">32</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/07/">七月 2016<span class="sidebar_archives-count">21</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/06/">六月 2016<span class="sidebar_archives-count">33</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/05/">五月 2016<span class="sidebar_archives-count">20</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/04/">四月 2016<span class="sidebar_archives-count">15</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/03/">三月 2016<span class="sidebar_archives-count">19</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/02/">二月 2016<span class="sidebar_archives-count">16</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/01/">一月 2016<span class="sidebar_archives-count">19</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/12/">十二月 2015<span class="sidebar_archives-count">20</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/11/">十一月 2015<span class="sidebar_archives-count">30</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/10/">十月 2015<span class="sidebar_archives-count">30</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/09/">九月 2015<span class="sidebar_archives-count">27</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/08/">八月 2015<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/07/">七月 2015<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/06/">六月 2015<span class="sidebar_archives-count">10</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/05/">五月 2015<span class="sidebar_archives-count">7</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/04/">四月 2015<span class="sidebar_archives-count">11</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/03/">三月 2015<span class="sidebar_archives-count">10</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/02/">二月 2015<span class="sidebar_archives-count">14</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/01/">一月 2015<span class="sidebar_archives-count">6</span></a></li><li><a class="sidebar_archives-link" href="/archives/2014/12/">十二月 2014<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2014/11/">十一月 2014<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2014/10/">十月 2014<span class="sidebar_archives-count">6</span></a></li><li><a class="sidebar_archives-link" href="/archives/2014/09/">九月 2014<span class="sidebar_archives-count">6</span></a></li><li><a class="sidebar_archives-link" href="/archives/2014/08/">八月 2014<span class="sidebar_archives-count">9</span></a></li><li><a class="sidebar_archives-link" href="/archives/2014/07/">七月 2014<span class="sidebar_archives-count">6</span></a></li><li><a class="sidebar_archives-link" href="/archives/2014/06/">六月 2014<span class="sidebar_archives-count">7</span></a></li><li><a class="sidebar_archives-link" href="/archives/2014/05/">五月 2014<span class="sidebar_archives-count">11</span></a></li><li><a class="sidebar_archives-link" href="/archives/2014/04/">四月 2014<span class="sidebar_archives-count">32</span></a></li><li><a class="sidebar_archives-link" href="/archives/2014/03/">三月 2014<span class="sidebar_archives-count">34</span></a></li><li><a class="sidebar_archives-link" href="/archives/2014/02/">二月 2014<span class="sidebar_archives-count">14</span></a></li><li><a class="sidebar_archives-link" href="/archives/2014/01/">一月 2014<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2013/12/">十二月 2013<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2013/07/">七月 2013<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2013/06/">六月 2013<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2013/04/">四月 2013<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2013/03/">三月 2013<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2013/02/">二月 2013<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2013/01/">一月 2013<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2012/12/">十二月 2012<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2012/10/">十月 2012<span class="sidebar_archives-count">6</span></a></li><li><a class="sidebar_archives-link" href="/archives/2012/09/">九月 2012<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2012/07/">七月 2012<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2012/06/">六月 2012<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2012/05/">五月 2012<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2011/08/">八月 2011<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2011/07/">七月 2011<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2011/06/">六月 2011<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2011/05/">五月 2011<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2011/04/">四月 2011<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2011/03/">三月 2011<span class="sidebar_archives-count">5</span></a></li><li><a class="sidebar_archives-link" href="/archives/2011/02/">二月 2011<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2010/12/">十二月 2010<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2010/11/">十一月 2010<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/archives/2010/09/">九月 2010<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2010/07/">七月 2010<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/archives/2010/06/">六月 2010<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2010/02/">二月 2010<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2010/01/">一月 2010<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2009/09/">九月 2009<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2009/07/">七月 2009<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2009/05/">五月 2009<span class="sidebar_archives-count">5</span></a></li><li><a class="sidebar_archives-link" href="/archives/2009/04/">四月 2009<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2009/03/">三月 2009<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2009/02/">二月 2009<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2008/07/">七月 2008<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2008/06/">六月 2008<span class="sidebar_archives-count">1</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    

    <!-- Pages  -->
    

    <!-- Article Number  -->
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->

    <div class="sidebar-divider"></div>


<!-- Theme Material -->

    <a href="https://github.com/viosey/hexo-theme-material"  class="sidebar-footer-text-a" target="_blank">
        <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
            主题 - Material
            <span class="sidebar-badge badge-circle">i</span>
        </div>
    </a>


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    
        <a href="https://twitter.com/twitter" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-twitter.svg);">
                <span class="visuallyhidden">Twitter</span>
            </button><!--
     --></a>
    

    <!-- Facebook -->
    
        <a href="https://www.facebook.com/facebook" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-facebook.svg);">
                <span class="visuallyhidden">Facebook</span>
            </button><!--
     --></a>
    

    <!-- Google + -->
    
        <a href="https://www.google.com/" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-gplus.svg);">
                <span class="visuallyhidden">Google Plus</span>
            </button><!--
     --></a>
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©&nbsp;
            <script type="text/javascript">
                var fd = new Date();
                document.write(fd.getFullYear());
            </script>
            &nbsp;Hexo
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import File -->

    <script src="/js/lazyload.min.js"></script>
    <script src="/js/js.min.js"></script>



    <script src="/js/nprogress.js"></script>


<script type="text/javascript">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>
















<!-- Window Load-->
<script>
    $(window).load(function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });
</script>

<!-- MathJax Load-->

<script>
    <!-- Offer LazyLoad -->
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    <!-- Start Queue -->
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

                </main>
            </div>
        </body>
    
</html>
