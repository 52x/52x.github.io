<!DOCTYPE html>
<html lang="zh">
    <head>
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.3.4 -->

    <!-- Title -->
    
    <title>
        
            翻译nightwatchjs guid | 
        
        Hexo
    </title>

    <!-- Meta & Info -->
    <meta charset="utf-8">

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">
    
    
    
    
    
    

    <meta http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#0097A7">
    <meta name="author" content="John Doe">
    <meta name="description" content="null">
    <meta name="keywords" content="null,集成测试，验收测试，自动化测试">

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/favicon.png">
    <link rel="icon" sizes="192x192" href="/img/favicon.png">
    <link rel="apple-touch-icon" href="/img/favicon.png">

    <!--iOS -->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-title" content="Title">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="480">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Hexo">

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="http://yoursite.com">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="翻译nightwatchjs guid | Hexo">
    <meta property="og:description" content="null">
    <meta property="og:article:tag" content="集成测试，验收测试，自动化测试"> 

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import CSS & jQuery -->
    
        <link rel="stylesheet" href="/css/material.min.css">
        <link rel="stylesheet" href="/css/style.min.css">
        <!-- Config CSS -->


<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #0097A7 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #0097A7 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #0097A7 !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-color: #F5F5F5;
      }

      /* blog_info bottom background */
      #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text{
        background-color: #fff;
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


        <script src="/js/jquery.min.js"></script>
        <script src="/js/queue.js"></script>
    

    <!-- UC Browser Compatible -->
    <script>
        var agent = navigator.userAgent.toLowerCase();
        if(agent.indexOf('ucbrowser')>0) {
            document.write("<link rel=\"stylesheet\" href=\"/css/uc.css\">");
            alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
        }
    </script>

    

    


    <!-- Bing Background -->
    

    <!-- Custom Head -->
    
</head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->

    <!-- Left aligned menu below button -->
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">1.</span> <span class="post-toc-text">综述</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">什么是NightWatch?</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">Selenium介绍</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">2.</span> <span class="post-toc-text">现实原理</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">3.</span> <span class="post-toc-text">安装</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">install nodejs</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">安装 nightWatch</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">3.3.</span> <span class="post-toc-text">运行Selenium 服务</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">3.3.1.</span> <span class="post-toc-text">下载Selenium</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">3.3.2.</span> <span class="post-toc-text">自动运行</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">3.3.3.</span> <span class="post-toc-text">手动运行</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">4.</span> <span class="post-toc-text">配置</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">5.</span> <span class="post-toc-text">使用NightWatch</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">5.1.</span> <span class="post-toc-text">编写测试</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">5.2.</span> <span class="post-toc-text">使用XPath选择器</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">5.3.</span> <span class="post-toc-text">BDD Expect断言</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">5.4.</span> <span class="post-toc-text">before[Each] and after[Each] 钩子</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">5.5.</span> <span class="post-toc-text">异步 before[Each] and after[Each]</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">5.6.</span> <span class="post-toc-text">全局扩展(External Globals)</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">6.</span> <span class="post-toc-text">测试执行</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">6.1.</span> <span class="post-toc-text">运行测试(test Runner)</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">6.2.</span> <span class="post-toc-text">命令行参数</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">6.3.</span> <span class="post-toc-text">测试分组</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">6.4.</span> <span class="post-toc-text">测试标签(test tag)</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">6.5.</span> <span class="post-toc-text">禁止测试</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">6.6.</span> <span class="post-toc-text">并行运行</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">6.7.</span> <span class="post-toc-text">终端输出</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">6.8.</span> <span class="post-toc-text">via workers</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">6.9.</span> <span class="post-toc-text">使用Grunt</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">6.10.</span> <span class="post-toc-text">使用Mocha</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">6.10.1.</span> <span class="post-toc-text">可以通过两种方式使用mocha</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">7.</span> <span class="post-toc-text">处理页面对象</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">7.1.</span> <span class="post-toc-text">使用页面对象</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">7.2.</span> <span class="post-toc-text">定义dom 元素</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">7.3.</span> <span class="post-toc-text">定义切片</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">7.4.</span> <span class="post-toc-text">添加自定义命令</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">8.</span> <span class="post-toc-text">扩展NightWatch</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#undefined"><span class="post-toc-number">9.</span> <span class="post-toc-text">使用NightWatch进行单元测试</span></a></li></ol>

        <!--
        <li class="mdl-menu__item">
            Some Action
        </li>
        -->
    </ul>




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        
            <!-- Random Thumbnail -->
            <div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
            <script>
    var randomNum = Math.floor(Math.random() * 19 + 1);

    $('.post_thumbnail-random').attr('data-original', '/img/random/material-' + randomNum + '.png');
    $('.post_thumbnail-random').addClass('lazy');
</script>

        
    
            <p class="article-headline-p">
                翻译nightwatchjs guid
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/avatar.png" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>John Doe</strong>
        <span>5月 04, 2016</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/tags/集成测试，验收测试，自动化测试/">集成测试，验收测试，自动化测试</a>
    </ul>
    

    <!-- Share -->
    <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=翻译nightwatchjs guid&url=http://yoursite.com//2016/05/04/nightwatch1/index.html&pic=&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                分享到微博
            </li>
        </a>
    

    <!-- Share Twitter -->
    
        <a class="post_share-link" href="https://twitter.com/intent/tweet?text=翻译nightwatchjs guid&url=http://yoursite.com//2016/05/04/nightwatch1/index.html&via=John Doe" target="_blank">
            <li class="mdl-menu__item">
                分享到 Twitter
            </li>
        </a>
    

    <!-- Share Facebook -->
    
        <a class="post_share-link" href="https://www.facebook.com/sharer/sharer.php?u=http://yoursite.com//2016/05/04/nightwatch1/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Facebook
            </li>
        </a>
    

    <!-- Share Google+ -->
    
        <a class="post_share-link" href="https://plus.google.com/share?url=http://yoursite.com//2016/05/04/nightwatch1/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Google+
            </li>
        </a>
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    

    <!-- Share Telegram -->
    
</ul>

</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <h2>综述</h2>
<h3>什么是NightWatch?</h3>
<hr>
<p>NightWatch.js是一个web应用和web网站的自动化测试框架，使用nodejs编写，并使用第三方<a href="http://code.google.com/p/selenium/wiki/JsonWireProtocol" title="Selenium WebDriver API." target="_blank" rel="external">http://code.google.com/p/selenium/wiki/JsonWireProtocol</a>。</p>
<p>他是一个完整的浏览器自动化（端到端）解决方案，旨在简化CI的构建和书写自动化测试的过程。</p>
<h3>Selenium介绍</h3>
<hr>
<p>Selenium 是一个非常受欢迎的浏览器自动化的全面工具集，最初是为java研发的，但是也支持其他大多数的编程语言。</p>
<p>Selenium主项目包含：</p>
<ul>
<li>Selenium IDE</li>
<li>Selenium Remote Control</li>
<li>Selenium WebDriver</li>
<li>Selenium Grid</li>
</ul>
<p>NightWatch 使用 Selenium WebDriver，特别是WebDriver Wire Protocol用来执行浏览器自动化相关的任务。</p>
<h2>现实原理</h2>
<p>NightWatch运行通过发送带有正确参数的HTTP请求到Selenium服务器然后解析响应。restful api协议的定义是通过 Selenium JsonWireProtocol,看下面的演示流程图。
<img src="/mdimg/operation.png" alt=""></p>
<p>大部分情况下， NightWatch 需要发送至少两次请求到Selenium 服务去执行命令或断言，第一次请求通过一个css选择器或者xpath表达式来定位元素，然后在获取到的元素上执行命令或断言。</p>
<h2>安装</h2>
<h3>install nodejs</h3>
<hr>
<p>这步省略，不翻译，网上的教程一大把。</p>
<h3>安装 nightWatch</h3>
<hr>
<p>安装最新的版本通过npm命令，</p>
<p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install nightwatch</div></pre></td></tr></table></figure></p>
<p>国内用户还是建议使用cnpm
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cnpm install nightwatch</div></pre></td></tr></table></figure></p>
<h3>运行Selenium 服务</h3>
<hr>
<p>Selenium web驱动服务是一个简单的java servlet运行与你想要测试的机器上。</p>
<h4>下载Selenium</h4>
<p>下载最新的版本从<a href="http://selenium-release.storage.googleapis.com/index.html" title=" Selenium downloads page" target="_blank" rel="external">http://selenium-release.storage.googleapis.com/index.html</a>， 名称为selenium-server-standalone-{VERSION}.jar， 下载好后把他放置于</p>
<p>阿斯达岁的阿萨德阿萨德阿萨德阿萨德阿萨德</p>
<h4>自动运行</h4>
<p>如果服务和nightwatch运行在一个机器上，那么他可以由 nightwatch Test Runner直接启动或停止。</p>
<h4>手动运行</h4>
<p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">java -jar selenium-server-standalone-&#123;VERSION&#125;.jar</div></pre></td></tr></table></figure></p>
<p>更多的信息，请参考
<a href="http://code.google.com/p/selenium/wiki/RemoteWebDriverServer" target="_blank" rel="external">http://code.google.com/p/selenium/wiki/RemoteWebDriverServer</a></p>
<p>如果想参考运行时的option，只需在上面的命令后添加 --help</p>
<p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">java -jar selenium-server-standalone-&#123;VERSION&#125;.jar -help</div></pre></td></tr></table></figure></p>
<h2>配置</h2>
<p>测试运行期望一个基本的配置文件， 默认使用nightwatch.json这个文件在根目录下，现在，让我们创建一个在项目的根目录下。</p>
<p>nightwatch.json看起来像这样：</p>
<p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="string">"src_folders"</span> : [<span class="string">"tests"</span>],</div><div class="line">  <span class="string">"output_folder"</span> : <span class="string">"reports"</span>,</div><div class="line">  <span class="string">"custom_commands_path"</span> : <span class="string">""</span>,</div><div class="line">  <span class="string">"custom_assertions_path"</span> : <span class="string">""</span>,</div><div class="line">  <span class="string">"page_objects_path"</span> : <span class="string">""</span>,</div><div class="line">  <span class="string">"globals_path"</span> : <span class="string">""</span>,</div><div class="line"></div><div class="line">  <span class="string">"selenium"</span> : &#123;</div><div class="line">    <span class="string">"start_process"</span> : <span class="literal">false</span>,</div><div class="line">    <span class="string">"server_path"</span> : <span class="string">""</span>,</div><div class="line">    <span class="string">"log_path"</span> : <span class="string">""</span>,</div><div class="line">    <span class="string">"host"</span> : <span class="string">"127.0.0.1"</span>,</div><div class="line">    <span class="string">"port"</span> : <span class="number">4444</span>,</div><div class="line">    <span class="string">"cli_args"</span> : &#123;</div><div class="line">      <span class="string">"webdriver.chrome.driver"</span> : <span class="string">""</span>,</div><div class="line">      <span class="string">"webdriver.ie.driver"</span> : <span class="string">""</span></div><div class="line">    &#125;</div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  <span class="string">"test_settings"</span> : &#123;</div><div class="line">    <span class="string">"default"</span> : &#123;</div><div class="line">      <span class="string">"launch_url"</span> : <span class="string">"http://localhost"</span>,</div><div class="line">      <span class="string">"selenium_port"</span>  : <span class="number">4444</span>,</div><div class="line">      <span class="string">"selenium_host"</span>  : <span class="string">"localhost"</span>,</div><div class="line">      <span class="string">"silent"</span>: <span class="literal">true</span>,</div><div class="line">      <span class="string">"screenshots"</span> : &#123;</div><div class="line">        <span class="string">"enabled"</span> : <span class="literal">false</span>,</div><div class="line">        <span class="string">"path"</span> : <span class="string">""</span></div><div class="line">      &#125;,</div><div class="line">      <span class="string">"desiredCapabilities"</span>: &#123;</div><div class="line">        <span class="string">"browserName"</span>: <span class="string">"firefox"</span>,</div><div class="line">        <span class="string">"javascriptEnabled"</span>: <span class="literal">true</span>,</div><div class="line">        <span class="string">"acceptSslCerts"</span>: <span class="literal">true</span></div><div class="line">      &#125;</div><div class="line">    &#125;,</div><div class="line"></div><div class="line">    <span class="string">"chrome"</span> : &#123;</div><div class="line">      <span class="string">"desiredCapabilities"</span>: &#123;</div><div class="line">        <span class="string">"browserName"</span>: <span class="string">"chrome"</span>,</div><div class="line">        <span class="string">"javascriptEnabled"</span>: <span class="literal">true</span>,</div><div class="line">        <span class="string">"acceptSslCerts"</span>: <span class="literal">true</span></div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2>使用NightWatch</h2>
<h3>编写测试</h3>
<p>优先使用css选择器指定页面上的元素这种模式，nightwatch能够非常容易的创建端到端的测试。
在你的项目中创建一个测试目录，比如tests，每一个文件都会自动被nightwatch自动加载。
一个基本的测试看来其像这样：
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  <span class="string">'Demo test Google'</span> : <span class="function"><span class="keyword">function</span> (<span class="params">browser</span>) </span>&#123;</div><div class="line">    browser</div><div class="line">      .url(<span class="string">'http://www.google.com'</span>)</div><div class="line">      .waitForElementVisible(<span class="string">'body'</span>, <span class="number">1000</span>)</div><div class="line">      .setValue(<span class="string">'input[type=text]'</span>, <span class="string">'nightwatch'</span>)</div><div class="line">      .waitForElementVisible(<span class="string">'button[name=btnG]'</span>, <span class="number">1000</span>)</div><div class="line">      .click(<span class="string">'button[name=btnG]'</span>)</div><div class="line">      .pause(<span class="number">1000</span>)</div><div class="line">      .assert.containsText(<span class="string">'#main'</span>, <span class="string">'Night Watch'</span>)</div><div class="line">      .end();</div><div class="line">  &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<pre><code>    切记当您完成测试的时候，永远要调用.end()方法。这个方法会通知Selenium正确的关闭
</code></pre>
<p>一个测试也可以包含多步，如果你需要：
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  <span class="string">'step one'</span> : <span class="function"><span class="keyword">function</span> (<span class="params">browser</span>) </span>&#123;</div><div class="line">    browser</div><div class="line">      .url(<span class="string">'http://www.google.com'</span>)</div><div class="line">      .waitForElementVisible(<span class="string">'body'</span>, <span class="number">1000</span>)</div><div class="line">      .setValue(<span class="string">'input[type=text]'</span>, <span class="string">'nightwatch'</span>)</div><div class="line">      .waitForElementVisible(<span class="string">'button[name=btnG]'</span>, <span class="number">1000</span>)</div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  <span class="string">'step two'</span> : <span class="function"><span class="keyword">function</span> (<span class="params">browser</span>) </span>&#123;</div><div class="line">    browser</div><div class="line">      .click(<span class="string">'button[name=btnG]'</span>)</div><div class="line">      .pause(<span class="number">1000</span>)</div><div class="line">      .assert.containsText(<span class="string">'#main'</span>, <span class="string">'Night Watch'</span>)</div><div class="line">      .end();</div><div class="line">  &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>同样的也可以这样写：
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">this</span>.demoTestGoogle = <span class="function"><span class="keyword">function</span> (<span class="params">browser</span>) </span>&#123;</div><div class="line">  browser</div><div class="line">    .url(<span class="string">'http://www.google.com'</span>)</div><div class="line">    .waitForElementVisible(<span class="string">'body'</span>, <span class="number">1000</span>)</div><div class="line">    .setValue(<span class="string">'input[type=text]'</span>, <span class="string">'nightwatch'</span>)</div><div class="line">    .waitForElementVisible(<span class="string">'button[name=btnG]'</span>, <span class="number">1000</span>)</div><div class="line">    .click(<span class="string">'button[name=btnG]'</span>)</div><div class="line">    .pause(<span class="number">1000</span>)</div><div class="line">    .assert.containsText(<span class="string">'#main'</span>, <span class="string">'The Night Watch'</span>)</div><div class="line">    .end();</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<h3>使用XPath选择器</h3>
<h3>BDD Expect断言</h3>
<p>nightwatch从v0.7开始引入新的BDD风格的断言库，大大的改善了断言的灵活性和可读性。
expect断言使用Expect的子集api。这是一个例子:
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  <span class="string">'Demo test Google'</span> : <span class="function"><span class="keyword">function</span> (<span class="params">client</span>) </span>&#123;</div><div class="line">    client</div><div class="line">      .url(<span class="string">'http://google.no'</span>)</div><div class="line">      .pause(<span class="number">1000</span>);</div><div class="line"></div><div class="line">    <span class="comment">// expect element  to be present in 1000ms</span></div><div class="line">    client.expect.element(<span class="string">'body'</span>).to.be.present.before(<span class="number">1000</span>);</div><div class="line"></div><div class="line">    <span class="comment">// expect element &lt;#lst-ib&gt; to have css property 'display'</span></div><div class="line">    client.expect.element(<span class="string">'#lst-ib'</span>).to.have.css(<span class="string">'display'</span>);</div><div class="line"></div><div class="line">    <span class="comment">// expect element  to have attribute 'class' which contains text 'vasq'</span></div><div class="line">    client.expect.element(<span class="string">'body'</span>).to.have.attribute(<span class="string">'class'</span>).which.contains(<span class="string">'vasq'</span>);</div><div class="line"></div><div class="line">    <span class="comment">// expect element &lt;#lst-ib&gt; to be an input tag</span></div><div class="line">    client.expect.element(<span class="string">'#lst-ib'</span>).to.be.an(<span class="string">'input'</span>);</div><div class="line"></div><div class="line">    <span class="comment">// expect element &lt;#lst-ib&gt; to be visible</span></div><div class="line">    client.expect.element(<span class="string">'#lst-ib'</span>).to.be.visible;</div><div class="line"></div><div class="line">    client.end();</div><div class="line">  &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>expect 是一个更灵活的，流畅的的断言定义，改进了assert，唯一的缺点是不能链式调用并且自定义消息也未被支持。</p>
<p>完整的expect断言，请参考：<a href="http://nightwatchjs.org/api/#expect" target="_blank" rel="external">API docs</a>，</p>
<h3>before[Each] and after[Each] 钩子</h3>
<p>nightwatch提供了标准的 <code>before/after</code> and <code>beforeEach/afterEach</code>钩子在测试中。
<code>before/after</code> 将分别的运行在测试套件的运行前或运行后，<code>beforeEach/afterEach</code>会在每一个testcase(test step)的前或后执行.
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  <span class="attr">before</span> : <span class="function"><span class="keyword">function</span>(<span class="params">browser</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'Setting up...'</span>);</div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  <span class="attr">after</span> : <span class="function"><span class="keyword">function</span>(<span class="params">browser</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'Closing down...'</span>);</div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  <span class="attr">beforeEach</span> : <span class="function"><span class="keyword">function</span>(<span class="params">browser</span>) </span>&#123;</div><div class="line"></div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  <span class="attr">afterEach</span> : <span class="function"><span class="keyword">function</span>(<span class="params">browser</span>) </span>&#123;</div><div class="line"></div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  <span class="string">"step one"</span> : <span class="function"><span class="keyword">function</span> (<span class="params">browser</span>) </span>&#123;</div><div class="line">    browser</div><div class="line">     <span class="comment">// ...</span></div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  <span class="string">"step two"</span> : <span class="function"><span class="keyword">function</span> (<span class="params">browser</span>) </span>&#123;</div><div class="line">    browser</div><div class="line">    <span class="comment">// ...</span></div><div class="line">      .end();</div><div class="line">  &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<h3>异步 before[Each] and after[Each]</h3>
<p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  <span class="attr">beforeEach</span>: <span class="function"><span class="keyword">function</span>(<span class="params">browser, done</span>) </span>&#123;</div><div class="line">    <span class="comment">// performing an async operation</span></div><div class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="comment">// finished async duties</span></div><div class="line">      done();</div><div class="line">    &#125;, <span class="number">100</span>);</div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  <span class="attr">afterEach</span>: <span class="function"><span class="keyword">function</span>(<span class="params">browser, done</span>) </span>&#123;</div><div class="line">    <span class="comment">// performing an async operation</span></div><div class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="comment">// finished async duties</span></div><div class="line">      done();</div><div class="line">    &#125;, <span class="number">200</span>);</div><div class="line">  &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<h3>全局扩展(External Globals)</h3>
<h2>测试执行</h2>
<h3>运行测试(test Runner)</h3>
<p>nightwatch包含一个命令行测试工具用来方便的运行测试和获取易用的输出。
这是一个例子
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">./nightwatch --test tests/demotest.js</div></pre></td></tr></table></figure></p>
<p>如果你使用<code>-g</code>安装<code>nightwatch</code>,你可以跳过这一步。
在您的项目中使用test Runner创建一个新文件调用nightwatch，并且添加这一行代码：</p>
<ul>
<li>for Linux and MacOSX
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">require</span>(<span class="string">"../bin/runner.js"</span>);</div></pre></td></tr></table></figure></li>
</ul>
<p>设定权限
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">chmod a+x ngihtwatch</div></pre></td></tr></table></figure></p>
<ul>
<li>for windows
名称为nightwatch.js的文件，添加代码：
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">require</span>(<span class="string">"../bin/runner.js"</span>);</div></pre></td></tr></table></figure></li>
</ul>
<p>运行
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">node nightwatch.js</div></pre></td></tr></table></figure></p>
<h3>命令行参数</h3>
<h3>测试分组</h3>
<p>nightwatch可以通过分组组织你的测试代码并且可以按需分组运行，分组测试测试相同子文件夹下的随哦有文件，文件夹名称就是分组的名称。
一个示例：</p>
<p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">lib/</div><div class="line">  ├── selenium-server-standalone.jar</div><div class="line">custom-commands/</div><div class="line">  ├── loginUser.js</div><div class="line">  ├── attachPicture.js</div><div class="line">tests/</div><div class="line">  ├── logingroup</div><div class="line">  |   ├── login_test.js</div><div class="line">  |   └── otherlogin_test.js</div><div class="line">  ├── addressbook</div><div class="line">  |   ├── addressbook_test.js</div><div class="line">  |   └── contact_test.js</div><div class="line">  ├── chat</div><div class="line">  |   ├── chatwindow_test.js</div><div class="line">  |   ├── chatmessage_test.js</div><div class="line">  |   └── otherchat_test.js</div><div class="line">  └── smoketests</div><div class="line">      ├── smoke_test.js</div><div class="line">      └── othersmoke_test.js</div></pre></td></tr></table></figure></p>
<p>如果想要只运行<code>smoketests</code>分组：
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">nightwatch --group smoketests</div></pre></td></tr></table></figure></p>
<p>同样： 如果想跳过分组<code>smoketests</code>运行：
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">nightwatch --skipgroup smoketests</div></pre></td></tr></table></figure></p>
<p>跳过多个分组的命令行代码：
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">nightwatch --skipgroup addressbook, chat</div></pre></td></tr></table></figure></p>
<h3>测试标签(test tag)</h3>
<p>你也同样可以基于标签有选择性运行测试目标，即可以只运行一个文件中的一部分。这样一个测试可能拥有多个标签。
标签可以通过<code>@ tags</code>属性添加到测试模块:
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  <span class="string">'@tags'</span>: [<span class="string">'login'</span>, <span class="string">'sanity'</span>],</div><div class="line">  <span class="string">'demo login test'</span>: <span class="function"><span class="keyword">function</span> (<span class="params">client</span>) </span>&#123;</div><div class="line">     <span class="comment">// test code</span></div><div class="line">  &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<ul>
<li>
<p>选择一个标签运行，使用<code>--tag</code>命令行
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">nightwatch --tag login</div></pre></td></tr></table></figure></p>
</li>
<li>
<p>指定多个标签运行：
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">nightwatch --tag login --tag something_else</div></pre></td></tr></table></figure></p>
</li>
<li>
<p>跳过指定的标签运行
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">nightwatch --skiptags login</div></pre></td></tr></table></figure></p>
</li>
<li>
<p>跳过多个tag运行测试
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">nightwatch --skiptags login,something_else</div></pre></td></tr></table></figure></p>
</li>
</ul>
<h3>禁止测试</h3>
<p>为了防止一个测试模块运行，简单的设置<code>disabled</code>属性为<code>true</code>,就可以做到：
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  <span class="string">'@disabled'</span>: <span class="literal">true</span>, <span class="comment">// This will prevent the test module from running.</span></div><div class="line"></div><div class="line">  <span class="string">'sample test'</span>: <span class="function"><span class="keyword">function</span> (<span class="params">client</span>) </span>&#123;</div><div class="line">    <span class="comment">// test code</span></div><div class="line">  &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>这可能是有用的，如果你不想运行已知的有错的测试。</p>
<h3>并行运行</h3>
<p>从v0.5开始，nightwatch支持测试的并行运行，这里是通过在命令行中指定多个环境实现的
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">nightwatch -e <span class="keyword">default</span>,chrome</div></pre></td></tr></table></figure></p>
<p>并行的运行两种环境default和chrome</p>
<h3>终端输出</h3>
<p>每一个环境都是单独的子进程（<code>child_process</code>）中运行但是输出将被发送到主进程中。、
为了使输出更容易阅读，nightwatch默认缓冲输出每一个子进程的输出直到子进程运行结束，并且通过浏览器环境分组。</p>
<pre><code>    If you'd like to disable the output buffering and see the output from each child process as it is sent to stdout, simply set the property &quot;live_output&quot; : true on the top level in your nightwatch.json (e.g. after selenium).
    
    You can create a separate environment per browser (by chaining desiredCapabilities) and then run them in parallel. In addition, using the filter and exclude options tests can be split per environment in order to be ran in parallel.
</code></pre>
<h3>via workers</h3>
<h3>使用Grunt</h3>
<h3>使用Mocha</h3>
<h4>可以通过两种方式使用mocha</h4>
<ul>
<li>from NightWatch
可以在nightwatch.json中通过指定<code>test_runner</code>来使Mocha做为内置的执行。
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  ...</div><div class="line">  <span class="string">"test_runner"</span> : &#123;</div><div class="line">    <span class="string">"type"</span> : <span class="string">"mocha"</span>,</div><div class="line">    <span class="string">"options"</span> : &#123;</div><div class="line">      <span class="string">"ui"</span> : <span class="string">"tdd"</span>,</div><div class="line">      <span class="string">"reporter"</span> : <span class="string">"list"</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  ...</div><div class="line">&#125;</div></pre></td></tr></table></figure></li>
</ul>
<p>OR
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  ...</div><div class="line">  <span class="string">"test_runner"</span> : <span class="string">"mocha"</span></div><div class="line">  ...</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>一个完整的例子在这：<a href="https://github.com/mochajs/mocha/wiki/Using-mocha-programmatically#set-options" target="_blank" rel="external">here</a></p>
<p><code>test_runner</code>操作通用可以用来指定外界等级[？？]
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="string">"test_settings"</span> : &#123;</div><div class="line">    <span class="string">"mocha_tests"</span> : &#123;</div><div class="line">      <span class="string">"test_runner"</span> : &#123;</div><div class="line">        <span class="string">"type"</span> : <span class="string">"mocha"</span>,</div><div class="line">        <span class="string">"options"</span> : &#123;</div><div class="line">          <span class="string">"ui"</span> : <span class="string">"tdd"</span>,</div><div class="line">          <span class="string">"reporter"</span> : <span class="string">"list"</span></div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  ...</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>一个示例：
使用mocha编写的测试同样可以使用NightWatch语句。
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">describe(<span class="string">'Google demo test for Mocha'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line"></div><div class="line">  describe(<span class="string">'with Nightwatch'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line"></div><div class="line">    before(<span class="function"><span class="keyword">function</span>(<span class="params">client, done</span>) </span>&#123;</div><div class="line">      done();</div><div class="line">    &#125;);</div><div class="line"></div><div class="line">    after(<span class="function"><span class="keyword">function</span>(<span class="params">client, done</span>) </span>&#123;</div><div class="line">      client.end(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        done();</div><div class="line">      &#125;);</div><div class="line">    &#125;);</div><div class="line"></div><div class="line">    afterEach(<span class="function"><span class="keyword">function</span>(<span class="params">client, done</span>) </span>&#123;</div><div class="line">      done();</div><div class="line">    &#125;);</div><div class="line"></div><div class="line">    beforeEach(<span class="function"><span class="keyword">function</span>(<span class="params">client, done</span>) </span>&#123;</div><div class="line">      done();</div><div class="line">    &#125;);</div><div class="line"></div><div class="line">    it(<span class="string">'uses BDD to run the Google simple test'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">client</span>) </span>&#123;</div><div class="line">      client</div><div class="line">        .url(<span class="string">'http://google.com'</span>)</div><div class="line">        .expect.element(<span class="string">'body'</span>).to.be.present.before(<span class="number">1000</span>);</div><div class="line"></div><div class="line">      client.setValue(<span class="string">'input[type=text]'</span>, [<span class="string">'nightwatch'</span>, client.Keys.ENTER])</div><div class="line">        .pause(<span class="number">1000</span>)</div><div class="line">        .assert.containsText(<span class="string">'#main'</span>, <span class="string">'Night Watch'</span>);</div><div class="line">    &#125;);</div><div class="line">  &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<pre><code>    当使用mocha测试运行的时候，nightwatch的一写cli不是有效的，比如：`--retries`, `--suiteRetries`, `--reporter`
</code></pre>
<ul>
<li>使用标准mocha
在NightWatch中使用标准mocha同样是可能的，虽然会多一点代码引用并且你需要管理Selenium 服务。</li>
</ul>
<p>一个例子：
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> nightwatch = <span class="built_in">require</span>(<span class="string">'nightwatch'</span>);</div><div class="line"></div><div class="line">describe(<span class="string">'Github'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> client = nightwatch.initClient(&#123;</div><div class="line">    <span class="attr">silent</span> : <span class="literal">true</span></div><div class="line">  &#125;);</div><div class="line"></div><div class="line">  <span class="keyword">var</span> browser = client.api();</div><div class="line"></div><div class="line">  <span class="keyword">this</span>.timeout(<span class="number">99999999</span>);</div><div class="line"></div><div class="line">  before(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line"></div><div class="line">    browser.perform(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="built_in">console</span>.log(<span class="string">'beforeAll'</span>)</div><div class="line">    &#125;);</div><div class="line"></div><div class="line">  &#125;);</div><div class="line"></div><div class="line">  beforeEach(<span class="function"><span class="keyword">function</span>(<span class="params">done</span>) </span>&#123;</div><div class="line">    browser.perform(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="built_in">console</span>.log(<span class="string">'beforeEach'</span>)</div><div class="line">    &#125;);</div><div class="line"></div><div class="line">    client.start(done);</div><div class="line">  &#125;);</div><div class="line"></div><div class="line"></div><div class="line">  it(<span class="string">'Demo test GitHub'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">done</span>) </span>&#123;</div><div class="line">    browser</div><div class="line">      .url(<span class="string">'https://github.com/nightwatchjs/nightwatch'</span>)</div><div class="line">      .waitForElementVisible(<span class="string">'body'</span>, <span class="number">5000</span>)</div><div class="line">      .assert.title(<span class="string">'nightwatchjs/nightwatch · GitHub'</span>)</div><div class="line">      .waitForElementVisible(<span class="string">'body'</span>, <span class="number">1000</span>)</div><div class="line">      .assert.visible(<span class="string">'.container .breadcrumb a span'</span>)</div><div class="line">      .assert.containsText(<span class="string">'.container .breadcrumb a span'</span>, <span class="string">'nightwatch'</span>, <span class="string">'Checking project title is set to nightwatch'</span>);</div><div class="line"></div><div class="line">    client.start(done);</div><div class="line">  &#125;);</div><div class="line"></div><div class="line">  afterEach(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    browser.perform(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="built_in">console</span>.log(<span class="string">'afterEach'</span>)</div><div class="line">    &#125;);</div><div class="line">  &#125;);</div><div class="line"></div><div class="line">  after(<span class="function"><span class="keyword">function</span>(<span class="params">done</span>) </span>&#123;</div><div class="line">    browser.end(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="built_in">console</span>.log(<span class="string">'afterAll'</span>)</div><div class="line">    &#125;);</div><div class="line"></div><div class="line">    client.start(done);</div><div class="line">  &#125;);</div><div class="line"></div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<h2>处理页面对象</h2>
<h3>使用页面对象</h3>
<p>页面对象的方法是通过包装一个Web应用程序的页面或页面片段转换为对象的一个流行的端到端的测试模式。页面对象的目的是让软件客户端做任何事情，看到任何一个人可以被抽象掉访问和操作的页面所需的底层的HTML动作。</p>
<p>一个全面的页面对象介绍可以看这里： <a href="http://martinfowler.com/bliki/PageObject.html" target="_blank" rel="external">pages objects</a></p>
<pre><code>    As of version 0.7 Nightwatch provides an enhanced and more powerful interface for creating page objects, significantly improved over the previous support. Page objects created prior to v0.7 will still continue to work however we recommend upgrading to the new version. To use the new version, your page object must contain either the elements or sections property. Otherwise, Nightwatch will defer to the old.
</code></pre>
<ul>
<li>配置页面对象（Page Objects）
要创建一个页面对象简单地创建具有描述页面属性的对象。每个页面对象应设在一个单独的文件，位于一个指定的文件夹。 Nightwatch读取文件夹（或文件夹）在<code>page_objects_path</code>配置属性指定的页面对象。</li>
</ul>
<p><code>page_objects_path</code>属性同样可以是一个文件夹的数组，允许你在更小的分组中合乎逻辑的分割对象。</p>
<ul>
<li>Url 属性
你可以随意的添加<code>url</code>属性用来指定页面的url地址， 访问到页面之后，你可以在这个页面对象中调用原生的方法。
URL通常定义为一个字符串：
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  <span class="attr">url</span>: <span class="string">'http://google.com'</span>,</div><div class="line">  <span class="attr">elements</span>: &#123;&#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></li>
</ul>
<p>他也可以通过一个function被动态的定义，一个例子就是支持不同的测试地址，因此允许这样做：
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  <span class="attr">url</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; </div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.api.launchUrl + <span class="string">'/login'</span>; </div><div class="line">  &#125;,</div><div class="line">  <span class="attr">elements</span>: &#123;&#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<h3>定义dom 元素</h3>
<p>大多数时候， 你会定义<code>elements</code>在你的页面上然后在测试页面通过命令或者断言。
这样使你的所有元素都在一个地方定义的元素属性变得简单。特别是在大型集成测试，使用<code>elements</code>将会长期的使代码变的干净。</p>
<p>Switching between css and xpath locate strategies is handled internally so you don't need to call useXpath and useCss in your tests. The default locateStrategy is css but you can also specify xpath:</p>
<p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  <span class="attr">elements</span>: &#123;</div><div class="line">    <span class="attr">searchBar</span>: &#123; </div><div class="line">      <span class="attr">selector</span>: <span class="string">'input[type=text]'</span> </div><div class="line">    &#125;,</div><div class="line">    <span class="attr">submit</span>: &#123; </div><div class="line">      <span class="attr">selector</span>: <span class="string">'//[@name="q"]'</span>, </div><div class="line">      <span class="attr">locateStrategy</span>: <span class="string">'xpath'</span> </div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>Or if you're creating elements with the same locate strategy as is default, you can use the shorthand:</p>
<p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  <span class="attr">elements</span>: &#123;</div><div class="line">    <span class="attr">searchBar</span>: <span class="string">'input[type=text]'</span></div><div class="line">  &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>使用<code>elements</code>属性允许你查询<code>element</code>通过<code>@</code>前缀，当调用<code>element</code>命令和断言时，而不用选择器。
Optionally, you can define an array of objects:
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> sharedElements = &#123;</div><div class="line">  <span class="attr">mailLink</span>: <span class="string">'a[href*="mail.google.com"]'</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  <span class="attr">elements</span>: [</div><div class="line">    sharedElements,</div><div class="line">    &#123; <span class="attr">searchBar</span>: <span class="string">'input[type=text]'</span> &#125;</div><div class="line">  ]</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>Putting elements and url together, say you have the following defined above saved as a google.js file:
同时使用 <code>elements</code> 和<code>url</code>，有一个<code>google.js</code>的参考例子，
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  <span class="attr">url</span>: <span class="string">'http://google.com'</span>,</div><div class="line">  <span class="attr">elements</span>: &#123;</div><div class="line">    <span class="attr">searchBar</span>: &#123; </div><div class="line">      <span class="attr">selector</span>: <span class="string">'input[type=text]'</span> </div><div class="line">    &#125;,</div><div class="line">    <span class="attr">submit</span>: &#123; </div><div class="line">      <span class="attr">selector</span>: <span class="string">'//[@name="q"]'</span>, </div><div class="line">      <span class="attr">locateStrategy</span>: <span class="string">'xpath'</span> </div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>在测试中使用方法如下：
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  <span class="string">'Test'</span>: <span class="function"><span class="keyword">function</span> (<span class="params">client</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> google = client.page.google();</div><div class="line"></div><div class="line">    google.navigate()</div><div class="line">      .assert.title(<span class="string">'Google'</span>)</div><div class="line">      .assert.visible(<span class="string">'@searchBar'</span>)</div><div class="line">      .setValue(<span class="string">'@searchBar'</span>, <span class="string">'nightwatch'</span>)</div><div class="line">      .click(<span class="string">'@submit'</span>);</div><div class="line"></div><div class="line">    client.end();</div><div class="line">  &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<h3>定义切片</h3>
<p>Sometimes it is useful to define sections of a page. Sections do 2 things:</p>
<p>Provide a level of namespacing under the page
Provide element-level nesting so that any element defined within a section is a descendant of its parent section in the DOM
You can create sections using the sections property:
有时需要在页面中定义切片： 切片只做两件事情：</p>
<blockquote>
<ul>
<li>在页面下放提供一个命名空间</li>
<li>提供元素级别的嵌套，这样任何一个节点都能被定义在切片内作为dom的子元素</li>
</ul>
</blockquote>
<p>你可以使用<code>sections</code>属性创建切片。</p>
<p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  <span class="attr">sections</span>: &#123;</div><div class="line">    <span class="attr">menu</span>: &#123;</div><div class="line">      <span class="attr">selector</span>: <span class="string">'#gb'</span>,</div><div class="line">      <span class="attr">elements</span>: &#123;</div><div class="line">        <span class="attr">mail</span>: &#123; </div><div class="line">          <span class="attr">selector</span>: <span class="string">'a[href="mail"]'</span></div><div class="line">        &#125;,</div><div class="line">        <span class="attr">images</span>: &#123;</div><div class="line">          <span class="attr">selector</span>: <span class="string">'a[href="imghp"]'</span></div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>然后这样来测试：
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  <span class="string">'Test'</span>: <span class="function"><span class="keyword">function</span> (<span class="params">client</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> google = client.page.google();</div><div class="line">    google.expect.section(<span class="string">'@menu'</span>).to.be.visible;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> menuSection = google.section.menu;</div><div class="line">    menuSection.expect.element(<span class="string">'@mail'</span>).to.be.visible;</div><div class="line">    menuSection.expect.element(<span class="string">'@images'</span>).to.be.visible;</div><div class="line"></div><div class="line">    menuSection.click(<span class="string">'@mail'</span>);</div><div class="line"></div><div class="line">    client.end();</div><div class="line">  &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<pre><code>    Note that every command and assertion on a section (other than `expect` assertions) returns that section for chaining. If desired, you can nest sections under other sections for complex DOM structures.
</code></pre>
<h3>添加自定义命令</h3>
<p>你可以通过<code>commands</code>属性在页面中添加命令，这是一个有用的方法来封装逻辑页面，
Nightwatch will call the command on the context of the page or section. Client commands like pause are available via this.api. For chaining, each function should return the page object or section.</p>
<p>In this case, a command is used to encapsulate logic for clicking the submit button:
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> googleCommands = &#123;</div><div class="line">  <span class="attr">submit</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.api.pause(<span class="number">1000</span>);</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.waitForElementVisible(<span class="string">'@submitButton'</span>, <span class="number">1000</span>)</div><div class="line">      .click(<span class="string">'@submitButton'</span>)</div><div class="line">      .waitForElementNotPresent(<span class="string">'@submitButton'</span>);</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  <span class="attr">commands</span>: [googleCommands],</div><div class="line">  <span class="attr">elements</span>: &#123;</div><div class="line">    <span class="attr">searchBar</span>: &#123;</div><div class="line">      <span class="attr">selector</span>: <span class="string">'input[type=text]'</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">submitButton</span>: &#123;</div><div class="line">      <span class="attr">selector</span>: <span class="string">'button[name=btnG]'</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>这样测试是简单的，
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  <span class="string">'Test'</span>: <span class="function"><span class="keyword">function</span> (<span class="params">client</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> google = client.page.google();</div><div class="line">    google.setValue(<span class="string">'@searchBar'</span>, <span class="string">'nightwatch'</span>)</div><div class="line">      .submit();</div><div class="line"></div><div class="line">    client.end();</div><div class="line">  &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<h2>扩展NightWatch</h2>
<h2>使用NightWatch进行单元测试</h2>

    

    
</div>


                

                <!-- Post Comments -->
                
                    







                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/2016/04/30/blockchain-slides/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2016/05/06/LeetCode-TwoSum/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.png);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/avatar.png" alt="John Doe's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        youremail@email.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="#" target="_blank" title="Email Me">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        Email Me
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/" target="_self">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2017/04/">四月 2017<span class="sidebar_archives-count">28</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/03/">三月 2017<span class="sidebar_archives-count">37</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/02/">二月 2017<span class="sidebar_archives-count">12</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/01/">一月 2017<span class="sidebar_archives-count">12</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/12/">十二月 2016<span class="sidebar_archives-count">18</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/11/">十一月 2016<span class="sidebar_archives-count">24</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/10/">十月 2016<span class="sidebar_archives-count">39</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/09/">九月 2016<span class="sidebar_archives-count">32</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/08/">八月 2016<span class="sidebar_archives-count">32</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/07/">七月 2016<span class="sidebar_archives-count">21</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/06/">六月 2016<span class="sidebar_archives-count">33</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/05/">五月 2016<span class="sidebar_archives-count">20</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/04/">四月 2016<span class="sidebar_archives-count">15</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/03/">三月 2016<span class="sidebar_archives-count">19</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/02/">二月 2016<span class="sidebar_archives-count">16</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/01/">一月 2016<span class="sidebar_archives-count">19</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/12/">十二月 2015<span class="sidebar_archives-count">20</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/11/">十一月 2015<span class="sidebar_archives-count">30</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/10/">十月 2015<span class="sidebar_archives-count">30</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/09/">九月 2015<span class="sidebar_archives-count">27</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/08/">八月 2015<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/07/">七月 2015<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/06/">六月 2015<span class="sidebar_archives-count">10</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/05/">五月 2015<span class="sidebar_archives-count">7</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/04/">四月 2015<span class="sidebar_archives-count">11</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/03/">三月 2015<span class="sidebar_archives-count">10</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/02/">二月 2015<span class="sidebar_archives-count">14</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/01/">一月 2015<span class="sidebar_archives-count">6</span></a></li><li><a class="sidebar_archives-link" href="/archives/2014/12/">十二月 2014<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2014/11/">十一月 2014<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2014/10/">十月 2014<span class="sidebar_archives-count">6</span></a></li><li><a class="sidebar_archives-link" href="/archives/2014/09/">九月 2014<span class="sidebar_archives-count">6</span></a></li><li><a class="sidebar_archives-link" href="/archives/2014/08/">八月 2014<span class="sidebar_archives-count">9</span></a></li><li><a class="sidebar_archives-link" href="/archives/2014/07/">七月 2014<span class="sidebar_archives-count">6</span></a></li><li><a class="sidebar_archives-link" href="/archives/2014/06/">六月 2014<span class="sidebar_archives-count">7</span></a></li><li><a class="sidebar_archives-link" href="/archives/2014/05/">五月 2014<span class="sidebar_archives-count">11</span></a></li><li><a class="sidebar_archives-link" href="/archives/2014/04/">四月 2014<span class="sidebar_archives-count">32</span></a></li><li><a class="sidebar_archives-link" href="/archives/2014/03/">三月 2014<span class="sidebar_archives-count">34</span></a></li><li><a class="sidebar_archives-link" href="/archives/2014/02/">二月 2014<span class="sidebar_archives-count">14</span></a></li><li><a class="sidebar_archives-link" href="/archives/2014/01/">一月 2014<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2013/12/">十二月 2013<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2013/07/">七月 2013<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2013/06/">六月 2013<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2013/04/">四月 2013<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2013/03/">三月 2013<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2013/02/">二月 2013<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2013/01/">一月 2013<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2012/12/">十二月 2012<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2012/10/">十月 2012<span class="sidebar_archives-count">6</span></a></li><li><a class="sidebar_archives-link" href="/archives/2012/09/">九月 2012<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2012/07/">七月 2012<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2012/06/">六月 2012<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2012/05/">五月 2012<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2011/08/">八月 2011<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2011/07/">七月 2011<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2011/06/">六月 2011<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2011/05/">五月 2011<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2011/04/">四月 2011<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2011/03/">三月 2011<span class="sidebar_archives-count">5</span></a></li><li><a class="sidebar_archives-link" href="/archives/2011/02/">二月 2011<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2010/12/">十二月 2010<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2010/11/">十一月 2010<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/archives/2010/09/">九月 2010<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2010/07/">七月 2010<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/archives/2010/06/">六月 2010<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2010/02/">二月 2010<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2010/01/">一月 2010<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2009/09/">九月 2009<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2009/07/">七月 2009<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2009/05/">五月 2009<span class="sidebar_archives-count">5</span></a></li><li><a class="sidebar_archives-link" href="/archives/2009/04/">四月 2009<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2009/03/">三月 2009<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2009/02/">二月 2009<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2008/07/">七月 2008<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2008/06/">六月 2008<span class="sidebar_archives-count">1</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    

    <!-- Pages  -->
    

    <!-- Article Number  -->
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->

    <div class="sidebar-divider"></div>


<!-- Theme Material -->

    <a href="https://github.com/viosey/hexo-theme-material"  class="sidebar-footer-text-a" target="_blank">
        <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
            主题 - Material
            <span class="sidebar-badge badge-circle">i</span>
        </div>
    </a>


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    
        <a href="https://twitter.com/twitter" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-twitter.svg);">
                <span class="visuallyhidden">Twitter</span>
            </button><!--
     --></a>
    

    <!-- Facebook -->
    
        <a href="https://www.facebook.com/facebook" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-facebook.svg);">
                <span class="visuallyhidden">Facebook</span>
            </button><!--
     --></a>
    

    <!-- Google + -->
    
        <a href="https://www.google.com/" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-gplus.svg);">
                <span class="visuallyhidden">Google Plus</span>
            </button><!--
     --></a>
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©&nbsp;
            <script type="text/javascript">
                var fd = new Date();
                document.write(fd.getFullYear());
            </script>
            &nbsp;Hexo
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import File -->

    <script src="/js/lazyload.min.js"></script>
    <script src="/js/js.min.js"></script>



    <script src="/js/nprogress.js"></script>


<script type="text/javascript">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>
















<!-- Window Load-->
<script>
    $(window).load(function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });
</script>

<!-- MathJax Load-->

<script>
    <!-- Offer LazyLoad -->
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    <!-- Start Queue -->
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

                </main>
            </div>
        </body>
    
</html>
